<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>form-create 示例</title>
    <link href="https://cdn.jsdelivr.net/npm/element-ui@2.13.0/lib/theme-chalk/index.css" rel="stylesheet">
    <script defer src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/element-ui@2.13.0/lib/index.js"></script>
    <script defer src="/form-create.ele.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/@form-create/data/dist/province_city.js"></script>
    <script defer src="../mock.js"></script>
</head>

<body>
<div id="app">
    <h2>组件模式生成 / <a style="color: #999;" href="../prototype/index.html">使用Vue原型方法生成</a> / <a style="color: #999;"
                                                                                             href="../window/index.html">使用全局方法生成</a>
    </h2>{{time}}|{{time2}}
    <form-create ref="fc" v-model="fApi" :rule="rule" :option="option" @goods_name-change="change"
                 @btn-click="change" :value.sync="value"
                 @xaboy-change="change" @mounted="fcMounted" @on-submit="onSubmit"></form-create>
</div>
<script>

    function mock2(){
        return [...Array(1000)].map((v,k)=>{
            return {
                type:'input',
                field:'text'+k,
                title:'text'+k,
                value:'text'+k
            }
        })
    }

    window.onload = function () {
        window. _vm = new Vue({
            el: '#app',
            components: {
                formCreate: formCreate.$form()
            },
            data: {
                rule: mock(),
                value: {goods_info: 'goods_info',bad_reason:'bad_reasonbad_reason'},
                option: {
                    page:true,
                    // global: {
                    //     input: {
                    //         props: {
                    //             disabled: true
                    //         }
                    //     }
                    // },
                    //显示表单重置按钮
                    resetBtn: true,
                    mounted: function ($f) {
                        var $m = $f.model();
                        $m.goods_name.value = "HuaWei Plus";
                    },
                    // form:{
                    //     size:'mini'
                    // }
                },
                //$f
                fApi: {},
                time:0,
                time2:0,
            },
            methods: {
                change: function () {
                    console.log(arguments);
                },
                //表单提交事件
                onSubmit: function (formData) {
                    alert(JSON.stringify(formData));
                    this.fApi.btn.loading();
                    //重置按钮禁用
                    this.fApi.resetBtn.disabled();
                },
                fcMounted($f) {
                    console.log('form-create mounted', $f);

                }
            },
            mounted(){

            }
        });
    };
</script>
</body>

</html>
