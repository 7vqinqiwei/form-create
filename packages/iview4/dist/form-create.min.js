/*!
 * @form-create/iview4 v1.0.18
 * (c) 2018-2020 xaboy
 * Github https://github.com/xaboy/form-create
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@form-create/component-ivu-checkbox"),require("@form-create/component-ivu-frame"),require("@form-create/component-ivu-radio"),require("@form-create/component-ivu-select"),require("@form-create/component-ivu-tree"),require("@form-create/component-ivu-upload"),require("@form-create/component-ivu-group"),require("@form-create/core"),require("@form-create/utils")):"function"==typeof define&&define.amd?define(["exports","@form-create/component-ivu-checkbox","@form-create/component-ivu-frame","@form-create/component-ivu-radio","@form-create/component-ivu-select","@form-create/component-ivu-tree","@form-create/component-ivu-upload","@form-create/component-ivu-group","@form-create/core","@form-create/utils"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).formCreate={},e.checkbox$1,e.frame$1,e.radio$1,e.select$2,e.tree$2,e.upload$1,e.group,e.createFormCreate,e.utils)}(this,(function(e,t,r,n,o,i,a,u,s,c){"use strict";function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=l(t),f=l(r),m=l(n),d=l(o),h=l(i),v=l(a),y=l(u),k=l(s);function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t,r){return t&&b(e.prototype,t),r&&b(e,r),e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=N(e);if(t){var o=N(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return x(this,r)}}var $=[p.default,f.default,m.default,d.default,h.default,v.default,y.default],j=[{parser:function(e){T(r,e);var t=R(r);function r(){return g(this,r),t.apply(this,arguments)}return P(r,[{key:"render",value:function(e){var t=this;return this.vNode.checkbox({props:{ctx:this.$render.inputVData(this,!0).get(),options:this.rule.options,value:this.$handle.getFormData(this),children:e},on:{input:function(e){t.$render.onInput(t,e)}}})}}]),r}(s.BaseParser),name:"checkbox"},{parser:function(e){T(r,e);var t=R(r);function r(){return g(this,r),t.apply(this,arguments)}return P(r,[{key:"init",value:function(){var e=this.rule.props;e.startDate&&c.$set(e,"startDate",c.timeStampToDate(e.startDate))}},{key:"isRange",value:function(){return this.el.type.includes("range")||this.el.multiple}},{key:"_toValue",value:function(e){var t=this.el.formatDate(e||""),r=this.el.separator,n=this.isRange();return t?n?t.split(r):t:n?this.el.multiple?[]:["",""]:t}},{key:"toValue",value:function(e){var t=this.$handle.vm.$refs[this.refName];return t?(this.el=t,this._toValue(e)):e}},{key:"toFormValue",value:function(e){var t,r=Array.isArray(e),n=this.rule.props,o=n.type||"date";return t=-1!==["daterange","datetimerange"].indexOf(o)?r?e.map((function(e){return e?c.timeStampToDate(e):""})):["",""]:"date"===o&&!0===n.multiple?toString(e):(t=r?e[0]||"":e)?c.timeStampToDate(t):""}},{key:"mounted",value:function(){var e=this;this.toFormValue=function(t){var r=e.el.parseDate(t);return e.isRange()?r:r[0]},this.toValue=this._toValue}}]),r}(s.BaseParser),name:"datePicker"},{parser:function(e){T(r,e);var t=R(r);function r(){return g(this,r),t.apply(this,arguments)}return P(r,[{key:"render",value:function(e){var t=this.$render.inputVData(this).props("field",this.field);return this.vNode.frame(t,e)}},{key:"closeModel",value:function(){this.el.closeModel&&this.el.closeModel()}}]),r}(s.BaseParser),name:"frame"},{parser:function(e){T(r,e);var t=R(r);function r(){return g(this,r),t.apply(this,arguments)}return P(r,[{key:"render",value:function(){return[]}}]),r}(s.BaseParser),name:"hidden"},{parser:function(e){T(r,e);var t=R(r);function r(){return g(this,r),t.apply(this,arguments)}return P(r,[{key:"init",value:function(){var e=this.rule.props;e.autosize&&e.autosize.minRows&&c.$set(e,"rows",e.autosize.minRows||2)}}]),r}(s.BaseParser),name:"input"},{parser:function(e){T(r,e);var t=R(r);function r(){return g(this,r),t.apply(this,arguments)}return P(r,[{key:"toFormValue",value:function(e){return this.rule.options.filter((function(t){return t.value===e})).reduce((function(e,t){return t.label}),"")}},{key:"toValue",value:function(e){return this.rule.options.filter((function(t){return t.label===e})).reduce((function(e,t){return t.value}),"")}},{key:"render",value:function(e){return this.vNode.radio(this.$render.inputVData(this).props({options:this.rule.options}),e)}}]),r}(s.BaseParser),name:"radio"},{parser:function(e){T(r,e);var t=R(r);function r(){return g(this,r),t.apply(this,arguments)}return P(r,[{key:"render",value:function(e){return this.vNode.select(this.$render.inputVData(this).props("options",this.rule.options),e)}}]),r}(s.BaseParser),name:"select"},{parser:function(e){T(r,e);var t=R(r);function r(){return g(this,r),t.apply(this,arguments)}return P(r,[{key:"toFormValue",value:function(e){var t=this.rule,r=Array.isArray(e),n=t.props,o=n.min||0;return!0===n.range?r?e:[o,parseFloat(e)||o]:r?parseFloat(e[0])||o:parseFloat(e)}}]),r}(s.BaseParser),name:"slider"},{parser:function(e){T(r,e);var t=R(r);function r(){return g(this,r),t.apply(this,arguments)}return P(r,[{key:"render",value:function(e){var t=this.rule.props.slot||{};return this.vNode.switch(this.$render.inputVData(this).scopedSlots({open:function(){return t.open},close:function(){return t.close}}).get(),e)}}]),r}(s.BaseParser),name:"switch"},{parser:function(e){T(r,e);var t=R(r);function r(){return g(this,r),t.apply(this,arguments)}return P(r,[{key:"render",value:function(e){var t=this,r=this.$render.parserToData(this).get();return this.vNode.tree({props:{ctx:r,children:e,value:this.$handle.getFormData(this),type:r.props.type},ref:this.refName,key:this.key,on:{input:function(e){t.$render.onInput(t,e)}}})}}]),r}(s.BaseParser),name:"tree"},{parser:function(e){T(r,e);var t=R(r);function r(){return g(this,r),t.apply(this,arguments)}return P(r,[{key:"render",value:function(e){var t=this,r=this.$render.parserToData(this).get(),n=this.key,o=this.refName;delete r.props.defaultFileList;var i={uploadType:r.props.uploadType,maxLength:r.props.maxLength,modalTitle:r.props.modalTitle,handleIcon:r.props.handleIcon,onHandle:r.props.onHandle,allowRemove:r.props.allowRemove,value:this.$handle.getFormData(this),ctx:r,children:e};return this.vNode.upload({props:i,key:n,ref:o,on:{input:function(e){t.$render.onInput(t,e)}}})}}]),r}(s.BaseParser),name:"upload"}],I="default",_="md-refresh",C="ios-share",B="ios-information-circle-outline";var q=".form-create .form-create .ivu-form-item {\n    margin-bottom: 24px;\n}\n.form-create .form-create .ivu-form-item .ivu-form-item {\n    margin-bottom: 0px;\n}\n\n.form-create .fc-group .ivu-icon+.ivu-icon{\n    margin-left: 3px;\n}\n\n.form-create .fc-upload .ivu-icon{\n    vertical-align: middle;\n}\n\n.form-create .__fc_h {\n    display: none;\n}\n\n.form-create .__fc_v {\n    visibility: hidden;\n}\n";!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(q);var V=function(e){T(r,e);var t=R(r);function r(){return g(this,r),t.apply(this,arguments)}return P(r,[{key:"inputVData",value:function(e){!e.rule.props.size&&this.options.form.size&&e.vData.props("size",this.options.form.size)}},{key:"validate",value:function(e){this.getFormRef().validate((function(t){e&&e(t)}))}},{key:"validateField",value:function(e,t){this.getFormRef().validateField(e,t)}},{key:"resetField",value:function(e){this.vm.$refs[e.formItemRefName].resetField()}},{key:"clearValidateState",value:function(e){var t=this.vm.$refs[e.formItemRefName];t&&(t.validateMessage="",t.validateState="")}},{key:"beforeRender",value:function(){this.propsData=this.vData.props(this.options.form).props({model:this.$handle.formData,rules:this.$handle.validate,key:"form"+this.unique}).ref(this.refName).nativeOn({submit:c.preventDefault}).class(this.options.form.className).class("form-create",!0).key(this.unique).get()}},{key:"render",value:function(e){return e.length>0&&e.push(this.makeFormBtn()),this.vNode.form(this.propsData,[!1===this.options.row?e:this.makeRow(e)])}},{key:"makeRow",value:function(e){var t={},r=this.options.row||{};return r.class&&(t[r.class]=!0),this.vNode.row({props:r||{},key:"fr"+this.unique,class:t},e)}},{key:"container",value:function(e,t){return this.makeFormItem(t,e)}},{key:"makeFormItem",value:function(e,t){var r="fItem".concat(e.key).concat(this.unique),n=e.rule,o=e.field,i=e.formItemRefName,a=this.getGetCol(e),u=a.labelWidth||n.title?a.labelWidth:0,s=this.propsData.props,c=s.inline,l=s.col,p=this.vData.props({prop:o,label:n.title,rules:n.validate,labelWidth:u,required:n.props.required}).key(r).ref(i).class(n.className).get(),f=this.vNode.formItem(p,[t,this.makeFormPop(e,r)]);return!0===c||!1===l?f:this.makeCol(a,e,r,[f])}},{key:"makeFormPop",value:function(e,t){var r=e.rule;if(r.title){var n=c.isString(r.title)?{title:r.title}:r.title,o=this.options.info||{},i=[n.title||""];return r.info&&i.push(this.vNode.make(function(e){return"tooltip"===e.type}(o)?"Tooltip":"Poptip",{props:O(O({},o),{},{content:r.info}),key:"pop".concat(t)},[this.vNode.icon({props:{type:o.icon||B,size:16}})])),this.vNode.make("span",O(O({},n),{},{slot:"label"}),i)}}},{key:"makeCol",value:function(e,t,r,n){var o;void 0===e.span&&(e.span=24);var i=(w(o={},q.__fc_h,!!t.rule.hidden),w(o,q.__fc_v,!!t.rule.visibility),o);return e.class&&(i[e.class]=!0),this.vNode.col({props:e,class:i,key:"".concat(r,"col1")},n)}},{key:"makeFormBtn",value:function(){var e=[],t=!1!==this.vm.buttonProps&&!1!==this.vm.buttonProps.show,r=!1!==this.vm.resetProps&&!1!==this.vm.resetProps.show;return t&&e.push(this.makeSubmitBtn(r?19:24)),r&&e.push(this.makeResetBtn(4)),!0===this.propsData.props.inline?e:e.length?this.vNode.col({props:{span:24},key:"".concat(this.unique,"col2")},e):[]}},{key:"makeResetBtn",value:function(e){var t=this,r=this.vm.resetProps,n=r.col||{span:e,push:1};return this.vNode.col({props:n,key:"".concat(this.unique,"col3")},[this.vNode.button({key:"frsbtn".concat(this.unique),props:r,on:{click:function(){var e=t.$handle.fCreateApi;c.isFunction(r.click)?r.click(e):e.resetFields()}}},[r.innerText])])}},{key:"makeSubmitBtn",value:function(e){var t=this,r=this.vm.buttonProps,n=r.col||{span:e};return this.vNode.col({props:n,key:"".concat(this.unique,"col4")},[this.vNode.button({key:"fbtn".concat(this.unique),props:r,on:{click:function(){var e=t.$handle.fCreateApi;c.isFunction(r.click)?r.click(e):e.submit()}}},[r.innerText])])}}]),r}(s.BaseForm),S=["date","dateRange","dateTime","dateTimeRange","year","month"].reduce((function(e,t){return e[t]=s.creatorTypeFactory("datePicker",t.toLowerCase()),e}),{}),z={frameInputs:["input",0],frameFiles:["file",0],frameImages:["image",0],frameInputOne:["input",1],frameFileOne:["file",1],frameImageOne:["image",1]},E=Object.keys(z).reduce((function(e,t){return e[t]=s.creatorTypeFactory("frame",(function(e){return e.props({type:z[t][0],maxLength:z[t][1]})})),e}),{});E.frameInput=E.frameInputs,E.frameFile=E.frameFiles,E.frameImage=E.frameImages;var A=["password","url","email","text","textarea"].reduce((function(e,t){return e[t]=s.creatorTypeFactory("input",t),e}),{});A.idate=s.creatorTypeFactory("input","date");var M={selectMultiple:s.creatorTypeFactory("select",!0,"multiple"),selectOne:s.creatorTypeFactory("select",!1,"multiple")},L={sliderRange:s.creatorTypeFactory("slider",!0,"range")},W={time:s.creatorTypeFactory("timePicker","time"),timeRange:s.creatorTypeFactory("timePicker","timerange")},H={treeSelected:"selected",treeChecked:"checked"},G=Object.keys(H).reduce((function(e,t){return e[t]=s.creatorTypeFactory("tree",H[t]),e}),{}),J={image:["image",0],file:["file",0],uploadFileOne:["file",1],uploadImageOne:["image",1]},K=Object.keys(J).reduce((function(e,t){return e[t]=s.creatorTypeFactory("upload",(function(e){return e.props({uploadType:J[t][0],maxLength:J[t][1]})})),e}),{});K.uploadImage=K.image,K.uploadFile=K.file;var Q=O(O(O(O(O(O(O(O({},S),E),A),M),L),W),G),K);["autoComplete","cascader","colorPicker","datePicker","frame","inputNumber","radio","rate","timePicker","group"].forEach((function(e){Q[e]=s.creatorFactory(e)})),Q.auto=Q.autoComplete,Q.number=Q.inputNumber,Q.color=Q.colorPicker,Q.hidden=function(e,t){return s.creatorFactory("hidden")("",e,t)},s.VNode.use({button:"i-button",icon:"Icon",slider:"Slider",rate:"Rate",upload:"fc-upload",cascader:"Cascader",colorPicker:"Color-Picker",timePicker:"Time-Picker",datePicker:"Date-Picker",switch:"i-switch",select:"fc-select",checkbox:"fc-checkbox",radio:"fc-radio",inputNumber:"Input-Number",input:"i-input",formItem:"Form-Item",form:"i-form",frame:"fc-frame",col:"i-col",row:"row",tree:"fc-tree",autoComplete:"AutoComplete",group:"fc-group"});var U={ui:"iview4",version:"1.0.18",formRender:V,components:$,parsers:j,makers:Q,getConfig:function(){return{form:{inline:!1,labelPosition:"right",labelWidth:125,showMessage:!0,autocomplete:"off",size:void 0},row:{gutter:0,type:void 0,align:void 0,justify:void 0,className:void 0},info:{type:"poptip",trigger:"hover",placement:"top-start",wordWrap:!0,icon:B},submitBtn:{type:"primary",size:"large",shape:void 0,long:!0,htmlType:"button",disabled:!1,icon:C,innerText:"提交",loading:!1,show:!0,col:void 0,click:void 0},resetBtn:{type:I,size:"large",shape:void 0,long:!0,htmlType:"button",disabled:!1,icon:_,innerText:"重置",loading:!1,show:!1,col:void 0,click:void 0}}}},X=k.default(U),Y=X.FormCreate,Z=X.install;s.Creator.prototype.event=function(e,t){var r,n=this;return r=c.isPlainObject(e)?e:w({},e,t),Object.keys(r).forEach((function(e){var t=0===c.toString(e).indexOf("on-")?e:"on-".concat(e);n.on(t,r[e])})),this},"undefined"!=typeof window&&(window.formCreate=Y,window.Vue&&Z(window.Vue));var ee=Y.maker;e.default=Y,e.maker=ee,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=form-create.min.js.map
