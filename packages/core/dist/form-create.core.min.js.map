{"version":3,"file":"form-create.core.min.js","sources":["../../utils/lib/modify.js","../../utils/lib/extend.js","../../utils/lib/type.js","../src/components/formCreate.js","../../utils/lib/mergeprops.js","../src/frame/attrs.js","../../utils/lib/deepextend.js","../../utils/lib/console.js","../src/frame/util.js","../../utils/lib/debounce.js","../../utils/lib/tostring.js","../../utils/lib/toline.js","../../utils/lib/unique.js","../src/factory/creator.js","../src/factory/maker.js","../src/frame/api.js","../src/render/cache.js","../../utils/lib/tocase.js","../src/render/render.js","../src/render/index.js","../src/handler/inject.js","../src/handler/page.js","../src/handler/render.js","../src/factory/context.js","../src/handler/loader.js","../src/handler/input.js","../src/handler/helper.js","../src/factory/parser.js","../src/handler/context.js","../src/handler/lifecycle.js","../src/handler/effect.js","../src/handler/index.js","../src/components/fragment.js","../src/factory/node.js","../src/factory/manager.js","../src/frame/index.js"],"sourcesContent":["import Vue from 'vue';\n\nexport function $set(target, field, value) {\n    Vue.set(target, field, value);\n}\n\nexport function $del(target, field) {\n    Vue.delete(target, field);\n}\n","import {$set} from './modify';\n\nconst _extends = Object.assign || function (a) {\n    for (let b, c = 1; c < arguments.length; c++) {\n        for (let d in b = arguments[c], b) {\n            Object.prototype.hasOwnProperty.call(b, d) && ($set(a, d, b[d]));\n        }\n    }\n\n    return a;\n}\n\nexport default function extend() {\n    return _extends.apply(this, arguments);\n}\n\nexport function copy(obj) {\n    if (typeof obj !== 'object' || obj === null) return obj;\n    return obj instanceof Array ? [...obj] : {...obj};\n}\n","const is = {\n    type(arg, type) {\n        return Object.prototype.toString.call(arg) === '[object ' + type + ']'\n    },\n    Undef(v) {\n        return v === undefined || v === null\n    },\n    Element(arg) {\n        return typeof arg === 'object' && arg !== null && arg.nodeType === 1 && !is.Object(arg)\n    },\n    trueArray(data) {\n        return Array.isArray(data) && data.length > 0;\n    }\n};\n\n['Date', 'Object', 'Function', 'String', 'Boolean', ' Array', 'Number'].forEach(t => {\n    is[t] = function (arg) {\n        return is.type(arg, t);\n    }\n})\n\nexport function hasProperty(rule, k) {\n    return ({}).hasOwnProperty.call(rule, k)\n}\n\nexport default is;\n","import extend from '@form-create/utils/lib/extend';\nimport is from '@form-create/utils/lib/type';\nimport Vue from 'vue';\n\nconst NAME = 'FormCreate';\n\n//todo 优化 this 绑定\nexport default function $FormCreate(FormCreate) {\n    return {\n        name: NAME,\n        componentName: NAME,\n        model: {\n            prop: 'api'\n        },\n        props: {\n            rule: {\n                type: Array,\n                required: true\n            },\n            option: {\n                type: Object,\n                default: () => {\n                    return {};\n                }\n            },\n            value: Object,\n            api: Object,\n        },\n        data() {\n            return {\n                formData: undefined,\n                $f: undefined,\n                isShow: true,\n                unique: 1,\n                renderRule: [...this.rule || []],\n                updateValue: ''\n            };\n        },\n        render() {\n            return this.formCreate.render();\n        },\n        methods: {\n            _refresh() {\n                ++this.unique;\n            },\n            _renderRule() {\n                this.renderRule = [...this.rule || []];\n            },\n            _updateValue(value) {\n                if (this._isDestroyed) return;\n                this.updateValue = JSON.stringify(value);\n                this.$emit('update:value', value);\n            }\n        },\n        watch: {\n            value: {\n                handler(n) {\n                    if (JSON.stringify(n) === this.updateValue) return;\n                    this.$f.setValue(n);\n                },\n                deep: true\n            },\n            option(n) {\n                this.formCreate.initOptions(n);\n                this.$f.refresh();\n            },\n            rule(n) {\n                if (n.length === this.renderRule.length && n.every(v => this.renderRule.indexOf(v) > -1)) return;\n                this.formCreate.$handle.reloadRule(n);\n                this._renderRule();\n            }\n        },\n        beforeCreate() {\n            const {rule, option, value} = this.$options.propsData;\n            this.formCreate = new FormCreate(this, Vue.observable(rule), Vue.observable(option));\n            value && is.Object(value) && this.formCreate.updateOptions({formData: value});\n            Object.keys(this.formCreate.prop).forEach(k => {\n                extend(this.$options[k], this.formCreate.prop[k]);\n            })\n        },\n    }\n}\n","export const normalMerge = ['attrs', 'props', 'domProps', 'scopedSlots'];\nexport const toArrayMerge = ['class', 'style', 'directives'];\nexport const functionalMerge = ['on', 'nativeOn'];\n\nconst mergeProps = (objects, initial = {}, opt = {}) => {\n    const _normalMerge = [...normalMerge, ...opt['normal'] || []];\n    const _toArrayMerge = [...toArrayMerge, ...opt['array'] || []];\n    const _functionalMerge = [...functionalMerge, ...opt['functional'] || []];\n    const propsMerge = opt['props'] || [];\n\n    return objects.reduce((a, b) => {\n        for (const key in b) {\n            if (a[key]) {\n                if (propsMerge.indexOf(key) > -1) {\n                    a[key] = mergeProps([b[key]], a[key]);\n                } else if (_normalMerge.indexOf(key) > -1) {\n                    a[key] = {...a[key], ...b[key]}\n                } else if (_toArrayMerge.indexOf(key) > -1) {\n                    const arrA = a[key] instanceof Array ? a[key] : [a[key]];\n                    const arrB = b[key] instanceof Array ? b[key] : [b[key]];\n                    a[key] = [...arrA, ...arrB]\n                } else if (_functionalMerge.indexOf(key) > -1) {\n                    for (const event in b[key]) {\n                        if (a[key][event]) {\n                            const arrA = a[key][event] instanceof Array ? a[key][event] : [a[key][event]];\n                            const arrB = b[key][event] instanceof Array ? b[key][event] : [b[key][event]];\n                            a[key][event] = [...arrA, ...arrB]\n                        } else {\n                            a[key][event] = b[key][event]\n                        }\n                    }\n                } else if (key === 'hook') {\n                    for (let hook in b[key]) {\n                        if (a[key][hook]) {\n                            a[key][hook] = mergeFn(a[key][hook], b[key][hook])\n                        } else {\n                            a[key][hook] = b[key][hook]\n                        }\n                    }\n                } else {\n                    a[key] = b[key]\n                }\n            } else {\n                if (_normalMerge.indexOf(key) > -1 || _functionalMerge.indexOf(key) > -1 || propsMerge.indexOf(key) > -1) {\n                    a[key] = {...b[key]}\n                } else if (_toArrayMerge.indexOf(key) > -1) {\n                    a[key] = b[key] instanceof Array ? [...b[key]] : (typeof b[key] === 'object' ? {...b[key]} : [b[key]]);\n                } else\n                    a[key] = b[key];\n            }\n        }\n        return a\n    }, initial);\n}\n\nconst mergeFn = (fn1, fn2) =>\n    function () {\n        fn1 && fn1.apply(this, arguments);\n        fn2 && fn2.apply(this, arguments);\n    };\n\nexport default mergeProps;\n","import {functionalMerge, normalMerge, toArrayMerge} from '@form-create/utils/lib/mergeprops';\n\n\nexport const keyAttrs = ['type', 'slot', 'emitPrefix', 'value', 'name', 'title', 'native', 'info', 'hidden', 'inject', 'options', 'emit', 'link', 'prefix', 'suffix', 'update'];\n\nexport const arrayAttrs = ['validate', 'children', 'control', 'className'];\n\nexport const normalAttrs = ['col', 'effect', 'wrap'];\n\nexport const attrs = [...keyAttrs, ...normalMerge, ...toArrayMerge, ...functionalMerge, ...arrayAttrs, ...normalAttrs];\n\nexport const allAttrs = [...attrs, 'ref', 'key'];\n","import {$set} from './modify';\nimport is from './type';\n\nexport default function deepExtend(origin, target = {}, mode) {\n    let isArr = false;\n    for (let key in target) {\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\n            let clone = target[key];\n            if ((isArr = Array.isArray(clone)) || is.Object(clone)) {\n                let nst = origin[key] === undefined;\n                if (isArr) {\n                    isArr = false;\n                    nst && $set(origin, key, []);\n                } else if (clone._clone && mode !== undefined) {\n                    if (mode) {\n                        clone = clone.getRule();\n                        nst && $set(origin, key, {});\n                    } else {\n                        $set(origin, key, clone._clone());\n                        continue;\n                    }\n                } else {\n                    nst && $set(origin, key, {});\n                }\n                origin[key] = deepExtend(origin[key], clone, mode);\n            } else {\n                $set(origin, key, clone);\n            }\n        }\n    }\n    return (mode !== undefined && Array.isArray(origin)) ? origin.filter(v => !v || !v.__ctrl) : origin\n}\n\nexport function deepCopy(value) {\n    return deepExtend({}, {value}).value;\n}\n\nexport function deepExtendArgs(origin, ...lst) {\n    lst.forEach(target => {\n        origin = deepExtend(origin, target);\n    });\n    return origin;\n}\n","export function format(type, msg, rule) {\n    return (`[form-create ${type}]: ${msg}` + (rule ? ('\\n\\nrule: ' + JSON.stringify(rule.getRule ? rule.getRule() : rule)) : ''))\n}\n\nexport function tip(msg, rule) {\n    console.warn(format('tip', msg, rule));\n}\n\nexport function err(msg, rule) {\n    console.error(format('err', msg, rule));\n}\n\nexport function logError(e) {\n    err(e.toString());\n    console.error(e);\n}\n","import deepExtend from '@form-create/utils/lib/deepextend';\nimport is from '@form-create/utils/lib/type';\nimport mergeProps from '@form-create/utils/lib/mergeprops';\nimport {arrayAttrs, normalAttrs} from './attrs';\nimport {err, logError} from '@form-create/utils/lib/console';\n\nconst PREFIX = '[[FORM-CREATE-PREFIX-';\nconst SUFFIX = '-FORM-CREATE-SUFFIX]]';\n\nexport function toJson(obj) {\n    return JSON.stringify(deepExtend([], obj, true), function (key, val) {\n        if (val && val._isVue === true)\n            return undefined;\n\n        if (typeof val !== 'function') {\n            return val;\n        }\n        if (val.__inject)\n            val = val.__origin;\n\n        if (val.__emit)\n            return undefined;\n\n        return PREFIX + val + SUFFIX;\n    });\n}\n\nfunction makeFn(fn) {\n    return eval('(function(){return ' + fn + ' })()')\n}\n\nexport function parseJson(json, mode) {\n    return JSON.parse(json, function (k, v) {\n        if (is.Undef(v) || !v.indexOf) return v;\n        try {\n            if (v.indexOf(SUFFIX) > 0 && v.indexOf(PREFIX) === 0) {\n                v = v.replace(SUFFIX, '').replace(PREFIX, '');\n                return makeFn(v.indexOf('function') === -1 && v.indexOf('(') !== 0 ? 'function ' + v : v);\n            } else if (!mode && v.indexOf('function') > -1)\n                return makeFn(v)\n        } catch (e) {\n            err(`解析失败:${v}`);\n            return undefined;\n        }\n        return v;\n    });\n}\n\nexport function enumerable(value, writable) {\n    return {\n        value,\n        enumerable: false,\n        configurable: false,\n        writable: !!writable\n    }\n}\n\n//todo 优化位置\nexport function copyRule(rule, mode) {\n    return copyRules([rule], mode || false)[0];\n}\n\nexport function copyRules(rules, mode) {\n    return deepExtend([], [...rules], mode || false);\n}\n\nexport function mergeRule(rule, merge) {\n    mergeProps([merge], rule, {array: arrayAttrs, normal: normalAttrs});\n    return rule;\n}\n\nexport function getRule(rule) {\n    return is.Function(rule.getRule) ? rule.getRule() : rule;\n}\n\nexport function mergeGlobal(target, merge) {\n    if (!target) return merge;\n    Object.keys(merge || {}).forEach((k) => {\n        mergeRule(target[k], merge[k] || {})\n    });\n}\n\nexport function funcProxy(that, proxy) {\n    Object.defineProperties(that, Object.keys(proxy).reduce((initial, k) => {\n        initial[k] = {\n            get() {\n                return proxy[k]();\n            }\n        }\n        return initial;\n    }, {}))\n}\n\nexport function byCtx(rule) {\n    return rule.__fc__ || (rule.__origin__ ? rule.__origin__.__fc__ : null)\n}\n\nexport function invoke(fn, def) {\n    try {\n        def = fn()\n    } catch (e) {\n        logError(e);\n    }\n    return def;\n}\n","export default function debounce(fn, wait) {\n    var timeout = null;\n    return function (...arg) {\n        if (timeout !== null)\n            clearTimeout(timeout);\n        timeout = setTimeout(() => fn.call(this, ...arg), wait);\n    }\n}\n\n","export default function toString(val) {\n    return val == null\n        ? ''\n        : typeof val === 'object'\n            ? JSON.stringify(val, null, 2)\n            : String(val)\n}\n","export default function toLine(name) {\n    let line = name.replace(/([A-Z])/g, '-$1').toLocaleLowerCase();\n    if (line.indexOf('-') === 0)\n        line = line.substr(1);\n    return line;\n}\n","let id = 0;\n\nexport default function uniqueId() {\n    return Math.random().toString(36).substr(3, 3) + Number(`${Date.now()}${++id}`).toString(36);\n}\n","import extend from '@form-create/utils/lib/extend';\nimport is from '@form-create/utils/lib/type';\nimport {attrs} from '../frame/attrs';\nimport {copyRule, mergeRule} from '../frame/util';\nimport {$set} from '@form-create/utils/lib';\n\nexport function baseRule() {\n    return {\n        props: {},\n        on: {},\n        validate: [],\n        options: [],\n        col: {},\n        children: [],\n        control: [],\n        emit: [],\n        link: [],\n        hidden: false,\n        value: null,\n    };\n}\n\nexport function creatorFactory(name) {\n    return (title, field, value, props = {}) => new Creator(name, title, field, value, props);\n}\n\nexport function creatorTypeFactory(name, type, typeName = 'type') {\n    return (title, field, value, props = {}) => {\n        const maker = new Creator(name, title, field, value, props);\n        if (is.Function(type)) type(maker);\n        else maker.props(typeName, type);\n        return maker;\n    };\n}\n\nexport default function Creator(type, title, field, value, props) {\n    this._data = extend(baseRule(), {type, title, field, value, props: props || {}});\n    this.event = this.on;\n}\n\nextend(Creator.prototype, {\n    getRule() {\n        return this._data;\n    },\n    setProp(key, value) {\n        $set(this._data, key, value);\n        return this;\n    },\n    _clone() {\n        const clone = new this.constructor();\n        clone._data = copyRule(this._data);\n        return clone;\n    },\n})\n\nattrs.forEach(name => {\n    Creator.prototype[name] = function (key) {\n        mergeRule(this._data, {[name]: arguments.length < 2 ? key : {[key]: arguments[1]}})\n        return this;\n    };\n});\n","import {creatorFactory, creatorTypeFactory} from './creator';\n\nconst commonMaker = creatorFactory('');\n\nexport function create(type, field, title) {\n    let make = commonMaker('', field);\n    make._data.type = type;\n    make._data.title = title;\n    return make;\n}\n\nexport function createTmp(template, vm, field, title) {\n    let make = commonMaker('', field);\n    make._data.type = 'template';\n    make._data.template = template;\n    make._data.title = title;\n    make._data.vm = vm;\n    return make;\n}\n\nexport default function makerFactory() {\n    return {\n        create,\n        createTmp,\n        template: createTmp,\n        factory: creatorFactory,\n        typeFactory: creatorTypeFactory,\n    };\n}\n","import {byCtx, invoke, mergeRule, toJson} from './util';\nimport {$set} from '@form-create/utils/lib/modify';\nimport {deepCopy} from '@form-create/utils/lib/deepextend';\nimport is, {hasProperty} from '@form-create/utils/lib/type';\nimport extend from '@form-create/utils/lib/extend';\nimport {err, format} from '@form-create/utils/lib/console';\n\nexport default function Api(h) {\n\n    function tidyFields(fields) {\n        if (is.Undef(fields))\n            fields = h.fields();\n        else if (!Array.isArray(fields))\n            fields = [fields];\n        return fields;\n    }\n\n    function copy(value) {\n        return deepCopy(value);\n    }\n\n    function props(fields, key, val) {\n        tidyFields(fields).forEach(field => {\n            const ctx = h.getCtx(field);\n            if (!ctx) return;\n            $set(ctx.rule, key, val);\n            h.$render.clearCache(ctx);\n        })\n    }\n\n    function byRules(ctxs, origin) {\n        return Object.keys(ctxs).reduce((initial, key) => {\n            initial[key] = origin ? ctxs[key].origin : ctxs[key].rule;\n            return initial;\n        }, {});\n    }\n\n    function tidyBtnProp(btn, def) {\n        if (is.Boolean(btn))\n            btn = {show: btn};\n        else if (!is.Undef(btn) && !is.Object(btn)) btn = {show: def};\n        return btn;\n    }\n\n    const api = {\n        get config() {\n            return h.options\n        },\n        get options() {\n            return h.options\n        },\n        get form() {\n            return h.form\n        },\n        get rule() {\n            return h.rules\n        },\n        formData(fields) {\n            return tidyFields(fields).reduce((initial, id) => {\n                const ctx = h.fieldList[id];\n                if (!ctx) return initial;\n                initial[ctx.field] = copy(ctx.rule.value);\n                return initial;\n            }, {});\n        },\n        getValue(field) {\n            const ctx = h.fieldList[field];\n            if (!ctx) return;\n            return copy(ctx.rule.value);\n        },\n        coverValue(formData) {\n            Object.keys(h.fieldList).forEach(key => {\n                const ctx = h.fieldList[key];\n                if (!ctx) return h.appendData[key] = formData[key];\n                ctx.rule.value = hasProperty(formData, key) ? formData[key] : undefined;\n            });\n        },\n        setValue(field) {\n            let formData = field;\n            if (arguments.length >= 2)\n                formData = {[field]: arguments[1]};\n            Object.keys(formData).forEach(key => {\n                const ctx = h.fieldList[key];\n                if (!ctx) return h.appendData[key] = formData[key];\n                ctx.rule.value = formData[key];\n            });\n        },\n        removeField(field) {\n            let ctx = h.getCtx(field);\n            if (!ctx) return;\n            ctx.rm();\n            return ctx.origin;\n        },\n        removeRule(rule) {\n            const ctx = rule && byCtx(rule);\n            if (!ctx) return;\n            ctx.rm();\n            return ctx.origin;\n        },\n        destroy: () => {\n            h.vm.$el.parentNode && h.vm.$el.parentNode.removeChild(h.vm.$el);\n            h.vm.$destroy();\n        },\n        fields: () => h.fields(),\n        append: (rule, after, child) => {\n            let fields = Object.keys(h.fieldList), index = h.sortList.length, rules;\n\n            if (rule.field && fields.indexOf(rule.field) > -1)\n                return err(`${rule.field} 字段已存在`, rule);\n\n            const ctx = h.getCtx(after);\n\n            if (ctx) {\n                if (child) {\n                    rules = ctx.rule.children;\n                    index = ctx.rule.children.length;\n                } else {\n                    index = ctx.root.indexOf(ctx.origin);\n                    rules = ctx.root;\n                }\n            } else rules = h.rules;\n            rules.splice(index + 1, 0, rule);\n        },\n        prepend: (rule, after, child) => {\n            let fields = Object.keys(h.fieldList), index = 0, rules;\n\n            if (rule.field && fields.indexOf(rule.field) > -1)\n                return err(`${rule.field} 字段已存在`, rule);\n\n            const ctx = h.getCtx(after);\n\n            if (ctx) {\n                if (child) {\n                    rules = ctx.rule.children;\n                } else {\n                    index = ctx.root.indexOf(ctx.origin);\n                    rules = ctx.root;\n                }\n            } else rules = h.rules;\n            rules.splice(index, 0, rule);\n        },\n        hidden(hidden, fields) {\n            props(fields, 'hidden', !!hidden);\n            h.refresh();\n        },\n        hiddenStatus(id) {\n            const ctx = h.getCtx(id);\n            if (!ctx) return;\n            return !!ctx.rule.hidden;\n        },\n        disabled(disabled, fields) {\n            tidyFields(fields).forEach((field) => {\n                const ctx = h.fieldList[field];\n                if (!ctx) return;\n                $set(ctx.rule.props, 'disabled', !!disabled);\n            });\n            h.refresh();\n        },\n        model(origin) {\n            return byRules(h.fieldList, origin);\n        },\n        component(origin) {\n            return byRules(h.customData, origin);\n        },\n        bind() {\n            return Object.defineProperties({}, Object.keys(h.fieldList).reduce((initial, field) => {\n                const ctx = h.fieldList[field];\n                initial[field] = {\n                    get() {\n                        return ctx.rule.value;\n                    },\n                    set(value) {\n                        ctx.rule.value = value;\n                    },\n                    enumerable: true,\n                    configurable: true\n                };\n                return initial;\n            }, {}))\n        },\n        submitBtnProps: (props = {}) => {\n            let btn = tidyBtnProp(h.options.submitBtn, true);\n            extend(btn, props);\n            h.options.submitBtn = btn;\n            api.refresh();\n        },\n        resetBtnProps: (props = {}) => {\n            let btn = tidyBtnProp(h.options.resetProps, false);\n            extend(btn, props);\n            h.options.resetProps = btn;\n            api.refresh();\n        },\n        reload: (rules) => {\n            h.reloadRule(rules)\n        },\n        updateOptions(options) {\n            h.fc.updateOptions(options);\n            api.refreshOptions();\n        },\n        onSubmit(fn) {\n            this.updateOptions({onSubmit: fn});\n        },\n        sync: (field) => {\n            const ctx = is.Object(field) ? byCtx(field) : h.getCtx(field);\n            if (ctx) {\n                ctx.updateKey(true);\n                h.$render.clearCache(ctx);\n                h.refresh();\n            }\n        },\n        refresh: (clear) => {\n            h.$render.clearCacheAll();\n            clear && h.$manager.updateKey();\n            h.refresh();\n        },\n        refreshOptions() {\n            h.$manager.updateOptions(h.options);\n            this.refresh();\n        },\n        hideForm: (isShow) => {\n            $set(h.vm, 'isShow', !isShow);\n        },\n        changeStatus: () => {\n            return h.changeStatus;\n        },\n        clearChangeStatus: () => {\n            h.changeStatus = false;\n        },\n        updateRule: (id, rule) => {\n            const ctx = h.getCtx(id);\n            if (ctx) {\n                mergeRule(ctx.rule, rule);\n            }\n        },\n        getRule: (id, origin) => {\n            const ctx = h.getCtx(id);\n            if (ctx) {\n                return origin ? ctx.origin : ctx.rule;\n            }\n        },\n        updateRules(rules) {\n            Object.keys(rules).forEach(id => {\n                this.updateRule(id, rules[id]);\n            })\n        },\n        updateValidate(id, validate, merge) {\n            if (merge) {\n                this.updateRule(id, {validate})\n            } else {\n                props(id, 'validate', validate);\n            }\n        },\n        updateValidates(validates, merge) {\n            Object.keys(validates).forEach(id => {\n                this.updateValidate(id, validates[id], merge);\n            })\n        },\n        method(id, name) {\n            const el = this.el(id);\n            if (!el || !el[name])\n                throw new Error(format('err', `${name}方法不存在`));\n            return (...args) => {\n                return el[name](...args);\n            }\n        },\n        exec(id, name, ...args) {\n            return invoke(() => this.method(id, name)(...args));\n        },\n        toJson() {\n            return toJson(this.rule);\n        },\n        trigger(id, event, ...args) {\n            const el = this.el(id);\n            el && el.$emit(event, ...args);\n        },\n        el(id) {\n            const ctx = h.getCtx(id);\n            if (ctx) return ctx.el || h.vm.$refs[ctx.ref];\n        },\n        closeModal: (id) => {\n            const el = api.el(id);\n            el && el.$emit && el.$emit('close-modal');\n        },\n        //todo 移动到ui组件 中\n        validate(callback) {\n            let state = false;\n            let subForm = {\n                ...{\n                    ___this: {\n                        validate(call) {\n                            h.$manager.validate((valid) => {\n                                call && call(valid);\n                            });\n                        }\n                    }\n                }, ...h.subForm\n            };\n            let keys = Object.keys(subForm).filter(field => {\n                    const sub = subForm[field];\n                    return Array.isArray(sub) ? sub.length : !is.Undef(sub);\n                }), len = keys.length, subLen;\n            const validFn = (valid, field) => {\n                if (valid) {\n                    if (subLen > 1) subLen--;\n                    else if (len > 1) len--;\n                    else callback(true);\n                } else {\n                    if (!state) {\n                        callback(false);\n                        state = true;\n                    }\n                    field && this.clearValidateState(field, false);\n                }\n            };\n\n            keys.forEach(field => {\n                let sub = subForm[field];\n                if (Array.isArray(sub)) {\n                    subLen = sub.length;\n                    sub.forEach(form => {\n                        form.validate((v) => validFn(v, field))\n                    })\n                } else if (sub) {\n                    subLen = 1;\n                    sub.validate(validFn)\n                }\n\n            });\n\n        },\n        validateField: (field, callback) => {\n            if (!h.fieldList[field])\n                return;\n            h.$manager.validateField(field, callback);\n        },\n        resetFields(fields) {\n            let ctxs = h.fieldList;\n            tidyFields(fields).forEach(field => {\n                let ctx = ctxs[field];\n                if (!ctx) return;\n                h.$render.clearCache(ctx);\n                ctx.rule.value = copy(ctx.defaultValue);\n                h.refreshControl(ctx);\n            });\n        },\n        submit(successFn, failFn) {\n            this.validate((valid) => {\n                if (valid) {\n                    let formData = this.formData();\n                    if (is.Function(successFn))\n                        successFn(formData, this);\n                    else {\n                        is.Function(h.options.onSubmit) && invoke(() => h.options.onSubmit(formData, this));\n                        h.vm.$emit('submit', formData, this);\n                    }\n                } else {\n                    is.Function(failFn) && invoke(() => failFn(this));\n                }\n            });\n        },\n        clearValidateState(fields, clearSub = true) {\n            tidyFields(fields).forEach(field => {\n                if (clearSub) this.clearSubValidateState(field);\n                const ctx = h.fieldList[field];\n                if (!ctx) return;\n                h.$manager.clearValidateState(ctx);\n            });\n        },\n        clearSubValidateState(fields) {\n            tidyFields(fields).forEach(field => {\n                const subForm = h.subForm[field];\n                if (!subForm) return;\n                if (Array.isArray(subForm)) {\n                    subForm.forEach(form => {\n                        form.clearValidateState();\n                    })\n                } else if (subForm) {\n                    subForm.clearValidateState();\n                }\n            })\n        },\n        getSubForm(field) {\n            return h.subForm[field];\n        },\n        btn: {\n            loading: (loading = true) => {\n                api.submitBtnProps({loading: !!loading});\n            },\n            disabled: (disabled = true) => {\n                api.submitBtnProps({disabled: !!disabled});\n            },\n            show: (isShow = true) => {\n                api.submitBtnProps({show: !!isShow});\n            }\n        },\n        resetBtn: {\n            loading: (loading = true) => {\n                api.resetBtnProps({loading: !!loading});\n            },\n            disabled: (disabled = true) => {\n                api.resetBtnProps({disabled: !!disabled});\n            },\n            show: (isShow = true) => {\n                api.resetBtnProps({show: !!isShow});\n            }\n        },\n        nextTick(fn) {\n            h.bus.$once('next-tick', fn);\n            h.refresh();\n        }\n        //todo 以上\n    };\n\n    ['on', 'once', 'off', 'set'].forEach(n => {\n        api[n] = function (...args) {\n            h.vm[`$${n}`](...args);\n        }\n    });\n\n    api.changeValue = api.changeField = api.setValue;\n\n    return api;\n}\n","import extend from '@form-create/utils/lib/extend';\n\nexport default function useCache(Render) {\n    extend(Render.prototype, {\n        initCache() {\n            this.clearCacheAll();\n        },\n        clearCache(ctx) {\n            if (!this.cache[ctx.id]) {\n                ctx.parent && this.clearCache(ctx.parent);\n                return;\n            }\n            if (this.cache[ctx.id].use === true || this.cache[ctx.id].parent) {\n                this.$handle.refresh();\n            }\n            const parent = this.cache[ctx.id].parent;\n            this.cache[ctx.id] = null;\n            parent && this.clearCache(parent);\n        },\n        clearCacheAll() {\n            this.cache = {};\n        },\n        setCache(ctx, vnode, parent) {\n            this.cache[ctx.id] = {\n                vnode,\n                use: false,\n                parent\n            };\n        },\n        getCache(ctx) {\n            const cache = this.cache[ctx.id];\n            cache.use = true;\n            return cache.vnode;\n        }\n    })\n\n}\n","export default function toCase(name) {\n    return name.replace(/(-[a-z])/g, function (v) {\n        return v.replace('-', '').toLocaleUpperCase();\n    });\n}\n","import extend from '@form-create/utils/lib/extend';\nimport mergeProps from '@form-create/utils/lib/mergeprops';\nimport is, {hasProperty} from '@form-create/utils/lib/type';\nimport {_vue as Vue} from '../frame';\nimport {tip} from '@form-create/utils/lib/console';\nimport {invoke} from '../frame/util';\nimport toCase from '@form-create/utils/lib/tocase';\n\nfunction setTempProps(vm, ctx, api) {\n    if (!vm.$props) return;\n\n    const {prop} = ctx;\n    const keys = Object.keys(vm.$props);\n    const inject = injectProp(ctx, api);\n    const injectKeys = Object.keys(inject);\n\n    keys.forEach(key => {\n        if (hasProperty(prop.props, key))\n            vm.$props[key] = prop.props[key];\n        else if (injectKeys.indexOf(key) > -1) vm.$props[key] = inject[key];\n    });\n\n    const key = (vm.$options.model && vm.$options.model.prop) || 'value';\n    if (keys.indexOf(key) > -1) {\n        vm.$props[key] = prop.value;\n    }\n}\n\nfunction injectProp(ctx, api) {\n    return {\n        formCreate: api,\n        formCreateField: ctx.field,\n        formCreateOptions: ctx.rule.options,\n        formCreateRule: (function () {\n            const temp = {...ctx.prop};\n            return temp.on = temp.on ? {...temp.on} : {}, temp;\n        }()),\n    }\n}\n\n\nexport default function useRender(Render) {\n    extend(Render.prototype, {\n        initRender() {\n            this.renderList = {};\n            this.clearOrgChildren();\n        },\n        initOrgChildren() {\n            const ctxs = this.$handle.ctxs;\n            this.orgChildren = Object.keys(ctxs).reduce((initial, id) => {\n                const children = ctxs[id].rule.children;\n                initial[id] = is.trueArray(children) ? [...children] : [];\n\n                return initial;\n            }, {});\n\n        },\n        clearOrgChildren() {\n            this.orgChildren = {};\n        },\n        render() {\n            if (!this.vm.isShow) {\n                return;\n            }\n            this.$manager.beforeRender();\n\n            const vn = this.sortList.map((id) => {\n                return this.renderCtx(this.$handle.ctxs[id]);\n            }).filter((val) => val !== undefined);\n\n            return this.$manager.render(vn);\n        },\n        makeVm(rule) {\n            const vm = rule.vm;\n            if (!vm)\n                return new Vue;\n            else if (is.Function(vm))\n                return invoke(() => vm(this.$handle.getInjectData(rule)));\n            else if (!vm._isVue)\n                return new Vue(vm);\n            return vm;\n        },\n        mergeGlobal(ctx) {\n            const g = this.$handle.options.global;\n            if (!g) return;\n            //todo 缓存配置,更新 option 更新\n            if (!ctx.cacheConfig)\n                ctx.cacheConfig = g[ctx.originType] || g[ctx.type] || g[ctx.trueType] || {};\n            ctx.prop = mergeProps([g['*'], ctx.cacheConfig, ctx.prop]);\n        },\n        renderTemp(ctx) {\n            if (!Vue.compile) {\n                tip('当前使用的Vue构建版本不支持compile,无法使用template功能');\n                return [];\n            }\n            const rule = ctx.prop;\n            const {id, key} = ctx;\n\n            if (!this.renderList[id]) {\n                if (!ctx.el) {\n                    ctx.el = this.makeVm(rule);\n                    this.vm.$nextTick(() => ctx.parser.mounted(ctx));\n                }\n\n                let vm = ctx.el;\n                if (ctx.input)\n                    vm.$on((vm.$options.model && vm.$options.model.event) || 'input', (value) => {\n                        this.onInput(ctx, value);\n                    });\n\n                this.renderList[id] = {\n                    vm,\n                    template: Vue.compile(rule.template)\n                };\n            }\n\n            const {vm, template} = this.renderList[id];\n\n            setTempProps(vm, ctx, this.$handle.api);\n\n            const vn = template.render.call(vm);\n\n            if (is.Undef(vn.data)) vn.data = {};\n            vn.key = key;\n            vn.data.ref = ctx.ref;\n            vn.data.key = key;\n            return vn;\n        },\n        renderAround(vn, ctx) {\n            const prop = ctx.prop;\n            return [prop.prefix || undefined, vn, prop.suffix || undefined];\n        },\n        renderCtx(ctx, parent) {\n            if (ctx.type === 'hidden') return;\n            if (!this.cache[ctx.id] || ctx.type === 'template') {\n                ctx.initProp();\n                this.mergeGlobal(ctx);\n                this.$manager.tidyRule(ctx);\n                this.ctxProp(ctx);\n                let {type, prop} = ctx, vn;\n                if (prop.hidden) return;\n                let flag = (!ctx.input && is.Undef(prop.native));\n                if (type === 'template' && prop.template) {\n                    vn = this.renderTemp(ctx);\n                } else {\n                    vn = ctx.parser.render(this.renderChildren(ctx), ctx);\n                }\n                vn = this.renderAround(vn, ctx);\n                if (!flag && prop.native !== true)\n                    vn = this.$manager.makeWrap(ctx, vn);\n                this.setCache(ctx, vn, parent);\n                return vn;\n            }\n\n            return this.getCache(ctx);\n        },\n        ctxProp(ctx, custom) {\n            const {ref, key} = ctx;\n            this.$manager.mergeProp(ctx, custom);\n            ctx.parser.mergeProp(ctx, custom);\n            const props = [\n                {\n                    props: injectProp(ctx, this.$handle.api),\n                    ref: ref,\n                    key: `${key}fc`,\n                }\n            ]\n\n            if (!custom) {\n                props.push({\n                    on: {\n                        'hook:mounted': () => {\n                            this.onMounted(ctx);\n                        },\n                        'fc.sub-form': (subForm) => {\n                            this.$handle.addSubForm(ctx, subForm);\n                        }\n                    },\n                    model: ctx.input ? {\n                        value: this.$handle.getFormData(ctx),\n                        callback: (value) => {\n                            this.onInput(ctx, value);\n                        },\n                        expression: `formData.${ctx.field}`\n                    } : undefined,\n                })\n            }\n            mergeProps(props, ctx.prop);\n            return ctx.prop;\n        },\n        onMounted(ctx) {\n            ctx.el = this.vm.$refs[ctx.ref];\n            ctx.parser.mounted(ctx);\n            this.$handle.effect(ctx, 'mounted');\n        },\n        onInput(ctx, value) {\n            this.$handle.onInput(ctx, value);\n        },\n        renderChildren(ctx) {\n            const {children} = ctx.rule, orgChildren = this.orgChildren[ctx.id];\n\n            if (!is.trueArray(children) && orgChildren) {\n                orgChildren.forEach(child => {\n                    if (!is.String(child) && child.__fc__) {\n                        this.$handle.rmCtx(child.__fc__);\n                    }\n                });\n                this.orgChildren[ctx.id] = [];\n                return [];\n            }\n\n            orgChildren && orgChildren.forEach(child => {\n                if (children.indexOf(child) === -1 && !is.String(child) && child.__fc__) {\n                    this.$handle.rmCtx(child.__fc__);\n                }\n            });\n\n            return children.map(child => {\n                if (is.String(child)) return child;\n                if (child.__fc__) {\n                    return this.renderCtx(child.__fc__, ctx);\n                }\n                if (!this.$handle.isRepeatRule(child.__origin__ || child) && child.type) {\n                    this.vm.$nextTick(() => {\n                        this.$handle.loadChildren(children, ctx);\n                        this.$handle.refresh();\n                    });\n                }\n            });\n\n        },\n        defaultRender(ctx, children) {\n            const prop = ctx.prop;\n            if (this.vNode[ctx.type])\n                return this.vNode[ctx.type](prop, children);\n            if (this.vNode[ctx.originType])\n                return this.vNode[ctx.originType](prop, children);\n            return this.vNode.make(ctx.originType, prop, children);\n        },\n        renderRule(rule, children = []) {\n            let type = toCase(rule.type);\n            const alias = this.vNode.aliasMap[type];\n            if (alias) type = toCase(alias);\n            return this.vm.$createElement(type, rule, children);\n        }\n    })\n}\n","import useCache from './cache';\nimport useRender from './render';\nimport extend from '@form-create/utils/lib/extend';\nimport {funcProxy} from '../frame/util';\n\nexport default function Render(handle) {\n    extend(this, {\n        $handle: handle,\n        fc: handle.fc,\n        vm: handle.vm,\n        $manager: handle.$manager,\n        vNode: new handle.fc.CreateNode(handle.vm),\n    });\n\n    funcProxy(this, {\n        options() {\n            return handle.options;\n        },\n        sortList() {\n            return handle.sortList;\n        }\n    })\n\n    this.initCache();\n    this.initRender();\n}\n\nuseCache(Render);\nuseRender(Render)\n","import extend from '@form-create/utils/lib/extend';\nimport is from '@form-create/utils/lib/type';\nimport toLine from '@form-create/utils/lib/toline';\n\n\nexport default function useInject(Handler) {\n    extend(Handler.prototype, {\n        parseInjectEvent(rule, on) {\n            if (rule.inject === false) return;\n            const inject = rule.inject || this.options.injectEvent;\n            if (is.Undef(inject)) return;\n            Object.keys(on).forEach(k => {\n                if (is.Function(on[k]))\n                    on[k] = this.inject(rule, on[k], inject)\n            });\n            return on;\n        },\n        parseEmit(ctx, on) {\n            let event = {}, rule = ctx.rule, {emitPrefix, field, name, inject} = rule;\n            let emit = rule[on ? 'emit' : 'nativeEmit'] || [];\n            if (is.trueArray(emit)) {\n                let emitKey = emitPrefix || field || name;\n                if (emitKey) {\n                    if (!on) emitKey = `native-${emitKey}`;\n                    emit.forEach(eventName => {\n                        if (!eventName) return;\n                        const fieldKey = toLine(`${emitKey}-${eventName}`);\n                        const fn = (...arg) => {\n                            this.vm.$emit(fieldKey, ...arg);\n                            this.vm.$emit('emit-event', fieldKey, ...arg);\n                        };\n                        fn.__emit = true;\n\n                        if (inject === false) {\n                            event[eventName] = fn;\n                        } else {\n                            inject = rule.inject || this.options.injectEvent;\n                            event[eventName] = is.Undef(inject) ? fn : this.inject(rule, fn, inject);\n                        }\n                    });\n                }\n\n            }\n            ctx.computed[on ? 'on' : 'nativeOn'] = event;\n            return event;\n        },\n        getInjectData(self, inject) {\n            const {option, rule} = this.vm.$options.propsData;\n            return {\n                $f: this.api,\n                rule,\n                self: self.__origin__,\n                option,\n                inject\n            };\n        },\n        inject(self, _fn, inject) {\n            if (_fn.__inject) {\n                if (this.watching)\n                    return _fn;\n                _fn = _fn.__origin;\n            }\n\n            const h = this;\n\n            const fn = function (...args) {\n                args.unshift(h.getInjectData(self, inject));\n                return _fn.apply(this, args);\n            };\n            fn.__inject = true;\n            fn.__origin = _fn;\n            return fn;\n        },\n    })\n}\n","import extend from '@form-create/utils/lib/extend';\nimport is from '@form-create/utils/lib/type';\n\n\nexport default function usePage(Handler) {\n    extend(Handler.prototype, {\n        usePage() {\n            const page = this.options.page;\n            if (!page) return;\n            let first = 25;\n            let limit = getLimit(this.rules);\n            if (is.Object(page)) {\n                if (page.first) first = parseInt(page.first, 10) || first;\n                if (page.limit) limit = parseInt(page.limit, 10) || limit;\n            }\n            extend(this, {\n                first,\n                limit,\n                pageEnd: this.rules.length <= first,\n            })\n\n            this.bus.$on('page-end', () => this.vm.$emit('page-end', this.api));\n            this.pageLoad();\n        },\n        pageLoad() {\n            const pageFn = () => {\n                if (this.pageEnd) {\n                    this.vm.$off('hook:updated', pageFn);\n                    this.bus.$emit('page-end');\n                } else {\n                    this.first += this.limit;\n                    this.pageEnd = this.rules.length <= this.first;\n                    this.loadRule();\n                    this.refresh();\n                }\n            }\n            this.vm.$on('hook:updated', pageFn);\n        },\n    })\n}\n\n\nfunction getLimit(rules) {\n    return rules.length < 31 ? 31 : Math.ceil(rules.length / 3);\n}\n","import extend from '@form-create/utils/lib/extend';\n\n\nexport default function useRender(Handler) {\n    extend(Handler.prototype, {\n        clearNextTick() {\n            this.nextTick && clearTimeout(this.nextTick);\n            this.nextTick = null;\n        },\n        bindNextTick(fn) {\n            this.clearNextTick();\n            this.nextTick = setTimeout(() => {\n                fn()\n                this.nextTick = null;\n            }, 10);\n        },\n        render() {\n            console.warn('%c render', 'color:green');\n            ++this.loadedId;\n\n            if (this.vm.unique > 0)\n                return this.$render.render();\n            else {\n                this.vm.unique = 1;\n                return [];\n            }\n        },\n    });\n}\n","import unique from '@form-create/utils/lib/unique';\nimport toCase from '@form-create/utils/lib/tocase';\nimport extend from '@form-create/utils/lib/extend';\nimport mergeProps from '@form-create/utils/lib/mergeprops';\nimport {enumerable} from '../frame/util';\nimport {deepCopy} from '@form-create/utils/lib/deepextend';\n\nfunction bind(ctx) {\n    Object.defineProperties(ctx.origin, {\n        __fc__: enumerable(ctx, true)\n    });\n}\n\nexport default function RuleContext(handle, rule) {\n    const id = unique();\n\n    extend(this, {\n        id,\n        ref: id,\n        wrapRef: id + 'fi',\n        rule,\n        origin: rule.__origin__ || rule,\n        name: rule.name,\n\n        watch: [],\n        linkOn: [],\n        root: [],\n        ctrlRule: [],\n        parent: null,\n        cacheConfig: null,\n        prop: {},\n        computed: {},\n        input: !!rule.field,\n        el: undefined,\n        defaultValue: rule.field ? deepCopy(rule.value) : undefined,\n        field: rule.field || undefined,\n    })\n\n    this.updateType();\n    this.updateKey();\n    bind(this);\n    this.update(handle, true);\n}\n\nextend(RuleContext.prototype, {\n    updateKey(flag) {\n        this.key = unique();\n        flag && this.parent && this.parent.updateKey(parent);\n    },\n    updateType() {\n        this.originType = this.rule.type;\n        this.type = toCase(this.rule.type);\n    },\n    setParser(parser) {\n        this.parser = parser;\n        parser.init(this);\n    },\n    initProp() {\n        this.prop = mergeProps([this.rule, this.computed]);\n    },\n    check(handle) {\n        return this.vm === handle.vm\n    },\n    unwatch() {\n        this.watch.forEach(un => un());\n        this.watch = [];\n    },\n    unlink() {\n        this.linkOn.forEach(un => un());\n        this.linkOn = [];\n    },\n    link() {\n        this.unlink();\n        this.$handle.appendLink(this);\n    },\n    watchTo() {\n        this.$handle.watchCtx(this);\n    },\n    delete() {\n        const undef = void 0;\n        this.unwatch();\n        this.unlink();\n        this.rmCtrl();\n        extend(this, {\n            deleted: true,\n            prop: {},\n            computed: {},\n            el: undef,\n            $handle: undef,\n            $render: undef,\n            vm: undef,\n            vNode: undef,\n            parent: null,\n            cacheConfig: null,\n        })\n    },\n    rmCtrl() {\n        this.ctrlRule.forEach(ctrl => ctrl.__fc__.rm());\n        this.ctrlRule = [];\n    },\n    rm() {\n        let index = this.root.indexOf(this.origin);\n        if (index === -1) return;\n        this.root.splice(index, 1);\n        this.rmCtrl();\n        this.$handle.rmCtx(this);\n        extend(this, {\n            root: []\n        });\n    },\n    update(handle, init) {\n        extend(this, {\n            deleted: false,\n            $handle: handle,\n            $render: handle.$render,\n            vm: handle.vm,\n            trueType: handle.getType(this.originType),\n            vNode: handle.$render.vNode,\n            updated: false,\n        });\n        !init && this.unwatch();\n        this.watchTo();\n        this.link();\n    }\n})\n","import extend from '@form-create/utils/lib/extend';\nimport debounce from '@form-create/utils/lib/debounce';\nimport {byCtx, copyRule, enumerable, getRule, invoke} from '../frame/util';\nimport is, {hasProperty} from '@form-create/utils/lib/type';\nimport {err} from '@form-create/utils/lib/console';\nimport {baseRule} from '../factory/creator';\nimport {$set} from '@form-create/utils/lib';\nimport RuleContext from '../factory/context';\n\nexport default function useLoader(Handler) {\n    extend(Handler.prototype, {\n        nextLoad() {\n            const id = this.loadedId;\n            this.vm.$nextTick(() => {\n                id === this.loadedId && this.refresh();\n            });\n        },\n        parseRule(_rule) {\n            const rule = getRule(_rule);\n\n            Object.defineProperties(rule, {\n                __origin__: enumerable(_rule, true)\n            });\n\n            fullRule(rule);\n\n            if (rule.field && hasProperty(this.options.formData || {}, rule.field))\n                rule.value = this.options.formData[rule.field];\n\n            rule.options = parseArray(rule.options);\n\n            this.ruleEffect(rule, 'init');\n\n            ['on', 'props', 'nativeOn'].forEach(k => {\n                this.parseInjectEvent(rule, rule[k] || {});\n            })\n\n            return rule;\n        },\n        isRepeatRule(rule) {\n            return this.repeatRule.indexOf(rule) > -1;\n        },\n        loadRule() {\n            console.warn('%c load', 'color:blue');\n            this.cycleLoad = false;\n            if (this.pageEnd) {\n                this.bus.$emit('load-start');\n            }\n            this._loadRule(this.rules);\n            if (this.cycleLoad && this.pageEnd) {\n                return this.loadRule();\n            }\n            if (this.pageEnd) {\n                this.bus.$emit('load-end');\n            }\n            this.vm._renderRule();\n            this.$render.initOrgChildren();\n            this.syncForm();\n        },\n        loadChildren(children, parent) {\n            this.cycleLoad = false;\n            this.bus.$emit('load-start');\n            this._loadRule(children, parent);\n            if (this.cycleLoad) {\n                return this.loadRule();\n            }\n            this.$render.clearCache(parent);\n        },\n        _loadRule(rules, parent) {\n\n            const preIndex = (i) => {\n                let pre = rules[i - 1];\n                if (!pre || !pre.__fc__) {\n                    return i > 0 ? preIndex(i - 1) : -1;\n                }\n                let index = this.sortList.indexOf(pre.__fc__.id);\n                return index > -1 ? index : preIndex(i - 1);\n            }\n\n            const loadChildren = (children, parent) => {\n                if (is.trueArray(children)) {\n                    this._loadRule(children, parent);\n                }\n            };\n\n            rules.map((_rule, index) => {\n                if (parent && is.String(_rule)) return;\n                if (!this.pageEnd && !parent && index >= this.first) return;\n\n                if (!is.Object(_rule) || !getRule(_rule).type)\n                    return err('未定义生成规则的 type 字段', _rule);\n\n                if (_rule.__fc__ && _rule.__fc__.root === rules && this.ctxs[_rule.__fc__.id]) {\n                    loadChildren(_rule.__fc__.rule.children, _rule.__fc__);\n                    return _rule.__fc__;\n                }\n\n                let rule = getRule(_rule);\n\n                if (rule.field && this.fieldList[rule.field]) {\n                    this.repeatRule.push(_rule);\n                    return err(`${rule.field} 字段已存在`, _rule);\n                }\n\n                let ctx;\n                if (_rule.__fc__) {\n                    ctx = _rule.__fc__;\n                    if (ctx.deleted) {\n                        if (!ctx.check(this)) {\n                            if (ctx.rule.__ctrl) {\n                                return;\n                            }\n                            ctx.update(this);\n                        }\n                    } else {\n                        if (!ctx.check(this) || this.ctxs[ctx.id]) {\n                            if (ctx.rule.__ctrl) {\n                                return;\n                            }\n                            rules[index] = _rule = _rule._clone ? _rule._clone() : copyRule(_rule);\n                            ctx = null;\n                        }\n                    }\n                }\n                if (!ctx) {\n                    ctx = new RuleContext(this, this.parseRule(_rule));\n                    this.bindParser(ctx);\n                } else if (ctx.originType !== ctx.rule.type) {\n                    ctx.updateType();\n                    this.bindParser(ctx);\n                }\n                this.appendValue(ctx.rule);\n                [false, true].forEach(b => this.parseEmit(ctx, b));\n                ctx.parent = parent || null;\n                ctx.root = rules;\n                this.setCtx(ctx);\n\n                loadChildren(ctx.rule.children, ctx);\n\n                if (!parent) {\n                    const _preIndex = preIndex(index);\n                    if (_preIndex > -1) {\n                        this.sortList.splice(_preIndex + 1, 0, ctx.id);\n                    } else {\n                        this.sortList.push(ctx.id);\n                    }\n                }\n\n                const r = ctx.rule;\n                if (!ctx.updated) {\n                    ctx.updated = true;\n                    if (is.Function(r.update)) {\n                        this.bus.$once('load-end', () => {\n                            this.refreshUpdate(ctx, r.value);\n                        });\n                    }\n                }\n\n                if (ctx.input)\n                    Object.defineProperty(r, 'value', this.valueHandle(ctx));\n                this.effect(ctx, 'loaded');\n                if (this.refreshControl(ctx)) this.cycleLoad = true;\n                return ctx;\n            });\n        },\n        refreshControl(ctx) {\n            return ctx.input && ctx.rule.control && this.useCtrl(ctx);\n        },\n        useCtrl(ctx) {\n            const controls = getCtrl(ctx), validate = [], api = this.api;\n            if (!controls.length) return false;\n\n            for (let i = 0; i < controls.length; i++) {\n                const control = controls[i], handleFn = control.handle || (val => val === control.value);\n                const data = {\n                    ...control,\n                    valid: invoke(() => handleFn(ctx.rule.value, api)),\n                    ctrl: findCtrl(ctx, control.rule),\n                };\n                if ((data.valid && data.ctrl) || (!data.valid && !data.ctrl)) continue;\n                validate.push(data);\n            }\n            if (!validate.length) return false;\n\n            let flag = false;\n            validate.reverse().forEach(({valid, rule, prepend, append, child, ctrl}) => {\n                if (valid) {\n                    flag = true;\n                    const ruleCon = {\n                        type: 'fcFragment',\n                        native: true,\n                        __ctrl: true,\n                        children: rule,\n                    }\n                    ctx.ctrlRule.push(ruleCon);\n                    this.bus.$once('load-start', () => {\n                        // this.cycleLoad = true;\n                        if (prepend) {\n                            api.prepend(ruleCon, prepend, child)\n                        } else if (append || child) {\n                            api.append(ruleCon, append || ctx.id, child)\n                        } else {\n                            ctx.root.splice(ctx.root.indexOf(ctx.origin) + 1, 0, ruleCon);\n                        }\n                    });\n                } else {\n                    ctx.ctrlRule.splice(ctx.ctrlRule.indexOf(ctrl), 1);\n                    const ctrlCtx = byCtx(ctrl);\n                    ctrlCtx && ctrlCtx.rm();\n                }\n            });\n            this.vm.$emit('control', ctx.origin, this.api);\n            this.effect(ctx, 'control');\n            return flag;\n        },\n        reloadRule: debounce(function (rules) {\n            return this._reloadRule(rules);\n        }, 1),\n        _reloadRule(rules) {\n            console.warn('%c reload', 'color:red');\n            if (!rules) rules = this.rules;\n\n            const ctxs = {...this.ctxs};\n\n            this.clearNextTick();\n            this.$render.clearOrgChildren();\n            this.initData(rules);\n\n            this.bus.$once('load-end', () => {\n                Object.keys(ctxs).filter(id => this.ctxs[id] === undefined)\n                    .forEach(id => this.rmCtx(ctxs[id], true));\n                this.$render.clearCacheAll();\n            });\n\n            this.loadRule();\n            this.refresh();\n\n            this.bus.$off('next-tick', this.nextReload);\n            this.bus.$once('next-tick', this.nextReload);\n        },\n        //todo 组件生成全部通过 alias\n        refresh() {\n            this.vm._refresh();\n        },\n    });\n}\n\n\nfunction parseArray(validate) {\n    return Array.isArray(validate) ? validate : [];\n}\n\nfunction fullRule(rule) {\n    const def = baseRule();\n\n    Object.keys(def).forEach(k => {\n        if (!hasProperty(rule, k)) $set(rule, k, def[k]);\n    });\n    return rule;\n}\n\nfunction getCtrl(ctx) {\n    const control = ctx.rule.control || [];\n    if (is.Object(control)) return [control];\n    else return control;\n}\n\nfunction findCtrl(ctx, rule) {\n    for (let i = 0; i < ctx.ctrlRule.length; i++) {\n        const ctrl = ctx.ctrlRule[i];\n        if (ctrl.children === rule)\n            return ctrl;\n    }\n}\n","import extend from '@form-create/utils/lib/extend';\nimport {$set} from '@form-create/utils/lib';\nimport is, {hasProperty} from '@form-create/utils/lib/type';\nimport {invoke} from '../frame/util';\n\nexport default function useInput(Handler) {\n    extend(Handler.prototype, {\n        getValue(ctx) {\n            if (!hasProperty(ctx, 'cacheValue')) {\n                ctx.cacheValue = ctx.parser.toValue(this.getFormData(ctx), ctx);\n            }\n            return ctx.cacheValue;\n        },\n        setValue(ctx, value, formValue, setFlag) {\n            ctx.cacheValue = value;\n            this.changeStatus = true;\n            this.nextLoad();\n            this.$render.clearCache(ctx);\n            this.setFormData(ctx, formValue);\n            this.syncValue();\n            this.valueChange(ctx, value);\n            this.vm.$emit('change', ctx.field, value, ctx.origin, this.api, setFlag);\n            this.effect(ctx, 'value');\n        },\n        onInput(ctx, value) {\n            let val;\n            if (ctx.input && (this.isQuote(ctx, val = ctx.parser.toValue(value, ctx)) || this.isChange(ctx, val))) {\n                this.setValue(ctx, val, value);\n            }\n        },\n        setFormData(ctx, value) {\n            $set(this.formData, ctx.field, value);\n        },\n        getFormData(ctx) {\n            return this.formData[ctx.field];\n        },\n        syncForm() {\n            Object.keys(this.form).forEach(k => delete this.form[k]);\n            Object.defineProperties(this.form, Object.keys(this.formData).reduce((initial, field) => {\n                const ctx = this.getCtx(field);\n                const handle = this.valueHandle(ctx);\n                handle.configurable = true;\n                initial[field] = handle;\n                return initial;\n            }, {}));\n            this.syncValue();\n        },\n        valueHandle(ctx) {\n            return {\n                enumerable: true,\n                get: () => {\n                    return this.getValue(ctx);\n                },\n                set: (value) => {\n                    if (this.isChange(ctx, value)) {\n                        this.setValue(ctx, value, ctx.parser.toFormValue(value, ctx), true);\n                    }\n                }\n            };\n        },\n        appendValue(rule) {\n            if (!rule.field || !hasProperty(this.appendData, rule.field)) return;\n            rule.value = this.appendData[rule.field];\n            delete this.appendData[rule.field];\n        },\n        addSubForm(ctx, subForm) {\n            this.subForm[ctx.field] = subForm;\n        },\n        syncValue() {\n            this.vm._updateValue({...this.form});\n        },\n        isChange(ctx, value) {\n            return JSON.stringify(ctx.rule.value) !== JSON.stringify(value);\n        },\n        isQuote(ctx, value) {\n            return (is.Object(value) || Array.isArray(value)) && value === ctx.rule.value;\n        },\n        refreshUpdate(ctx, val) {\n            const fn = ctx.rule.update;\n            if (is.Function(fn)) {\n                const state = invoke(() => fn(val, ctx.origin, this.api));\n                if (state === undefined) return;\n                ctx.rule.hidden = state === true;\n            }\n        },\n        valueChange(ctx, val) {\n            this.refreshRule(ctx, val);\n            this.bus.$emit('change-' + ctx.field, val);\n        },\n        refreshRule(ctx, val) {\n            if (this.refreshControl(ctx)) {\n                this.$render.clearCacheAll();\n                this.loadRule();\n                this.refresh();\n            }\n            this.refreshUpdate(ctx, val);\n        },\n        appendLink(ctx) {\n            const link = ctx.rule.link;\n            is.trueArray(link) && link.forEach(field => {\n                const fn = () => this.refreshRule(ctx, ctx.rule.value);\n\n                this.bus.$on('change-' + field, fn);\n                ctx.linkOn.push(() => this.bus.$off('change-' + field, fn));\n            });\n        },\n        fields() {\n            return Object.keys(this.formData);\n        },\n    });\n}\n","import {enumerable, getRule} from '../frame/util';\nimport is from '@form-create/utils/lib/type';\n\n\nexport default function useHelper(rules) {\n    if (!Array.isArray(rules) || rules.findField) return;\n    Object.defineProperties(rules, {\n        findField: enumerable(findField),\n        findName: enumerable(findName),\n        setValue: enumerable(setValue),\n    })\n}\n\nfunction find(field, name, origin) {\n    if (!this.length) return;\n    let children = [];\n    for (let i = 0; i < this.length; i++) {\n        if (!is.Object(this[i])) continue;\n        let rule = getRule(this[i]);\n        if (rule[name] === field) return origin ? rule : this[i];\n        if (is.trueArray(rule.children)) children = children.concat(rule.children);\n        is.trueArray(rule.control) && rule.control.forEach(r => {\n            children = children.concat(r.rule);\n        })\n    }\n    return find.call(children, field, name, origin);\n}\n\nfunction findField(field) {\n    return find.call(this, field, 'field');\n}\n\nfunction findName(field) {\n    return find.call(this, field, 'name');\n}\n\nfunction setValue(formData) {\n    Object.keys(formData).forEach(field => {\n        const rule = find.call(this, field, 'field', true);\n        if (rule) rule.value = formData[field];\n    });\n}\n","const BaseParser = {\n    init(ctx) {\n    },\n    toFormValue(value, ctx) {\n        return value\n    },\n    toValue(formValue, ctx) {\n        return formValue;\n    },\n    mounted(ctx) {\n    },\n    render(children, ctx) {\n        return ctx.$render.defaultRender(ctx, children);\n    },\n    mergeProp(ctx) {\n    }\n}\n\nexport default BaseParser;\n","import extend from '@form-create/utils/lib/extend';\nimport toCase from '@form-create/utils/lib/tocase';\nimport BaseParser from '../factory/parser';\nimport {$del, $set} from '@form-create/utils/lib';\nimport is from '@form-create/utils/lib/type';\n\n\nexport default function useContext(Handler) {\n    extend(Handler.prototype, {\n        getCtx(id) {\n            return this.fieldList[id] || this.customData[id] || this.ctxs[id];\n        },\n        setCtx(ctx) {\n            let {id, field, name, rule} = ctx;\n            this.ctxs[id] = ctx;\n            if (name) $set(this.customData, name, ctx);\n            if (!ctx.input) return;\n            this.fieldList[field] = ctx;\n            $set(this.formData, field, ctx.parser.toFormValue(rule.value, ctx));\n            $set(this.validate, field, rule.validate || []);\n        },\n        getParser(ctx) {\n            const list = this.fc.parsers;\n            return list[ctx.originType] || list[toCase(ctx.type)] || list[ctx.trueType] || BaseParser;\n        },\n        bindParser(ctx) {\n            ctx.setParser(this.getParser(ctx));\n        },\n        getType(alias) {\n            const map = this.fc.CreateNode.aliasMap;\n            const type = map[alias] || map[toCase(alias)] || alias;\n            return toCase(type);\n        },\n        watchCtx(ctx) {\n            const vm = this.vm;\n            const none = ['field', 'value', 'vm', 'template', 'name', 'config', 'control', 'inject'];\n            Object.keys(ctx.rule).filter(k => none.indexOf(k) === -1).forEach((key) => {\n                ctx.watch.push(vm.$watch(() => ctx.rule[key], n => {\n                    this.watching = true;\n                    if (key === 'hidden')\n                        ctx.updateKey(true);\n                    else if (key === 'link') {\n                        ctx.link();\n                        return;\n                    } else if (key === 'validate') {\n                        if (ctx.input) {\n                            this.validate[ctx.field] = n || []\n                        } else return;\n                    } else if (['props', 'on', 'nativeOn'].indexOf(key) > -1)\n                        this.parseInjectEvent(ctx.rule, n || {});\n                    else if (['emit', 'nativeEmit'].indexOf(key) > -1)\n                        this.parseEmit(ctx, key === 'emit');\n                    else if (key === 'type') {\n                        ctx.updateType();\n                        this.bindParser(ctx);\n                    } else if (key === 'children') {\n                        this.loadChildren(n, ctx);\n                    }\n                    this.$render.clearCache(ctx);\n                    this.watching = false;\n                }, {deep: key !== 'children'}));\n            });\n            this.watchEffect(ctx);\n        },\n        rmCtx(ctx, reloadFlag) {\n            this._rmCtx(ctx);\n            if (!reloadFlag) {\n                this.$render.initOrgChildren();\n                this.syncValue();\n            }\n        },\n        _rmCtx(ctx) {\n            if (ctx.deleted) return;\n            const {id, field, name} = ctx;\n            if (ctx.input) {\n                Object.defineProperty(ctx.rule, 'value', {\n                    value: ctx.rule.value,\n                    writable: true\n                });\n            }\n\n            if (is.trueArray(ctx.rule.children)) {\n                ctx.rule.children.forEach(h => h.__fc__ && this._rmCtx(h.__fc__));\n            }\n\n            $del(this.ctxs, id);\n            $del(this.validate, field);\n            $del(this.formData, field);\n            $del(this.form, field);\n            $del(this.fieldList, field);\n            $del(this.$render.renderList, id);\n            $del(this.customData, name);\n            $del(this.subForm, field);\n            $del(ctx, 'cacheValue');\n\n            const index = this.sortList.indexOf(id);\n            if (index > -1) {\n                this.sortList.splice(index, 1);\n            }\n\n            ctx.delete();\n            this.effect(ctx, 'deleted');\n            return ctx;\n        },\n    })\n}\n","import extend from '@form-create/utils/lib/extend';\nimport is from '@form-create/utils/lib/type';\nimport {invoke} from '../frame/util';\n\n\nexport default function useLifecycle(Handler) {\n    extend(Handler.prototype, {\n        mounted() {\n            const _mounted = () => {\n                this.isMounted = true;\n                this.lifecycle('mounted');\n            }\n            if (this.pageEnd) {\n                _mounted();\n            } else {\n                this.bus.$once('page-end', _mounted);\n            }\n        },\n        lifecycle(name) {\n            const fn = this.options[name];\n            is.Function(fn) && invoke(() => fn(this.api));\n            this.vm.$emit(name, this.api);\n        },\n    })\n}\n","import extend from '@form-create/utils/lib/extend';\nimport is from '@form-create/utils/lib/type';\n\n\nexport default function useEffect(Handler) {\n    extend(Handler.prototype, {\n        useProvider() {\n            const ps = this.fc.providers;\n            Object.keys(ps).forEach(k => {\n                const prop = ps[k];\n                prop._c = getComponent(prop);\n                this.onEffect(prop);\n                this.providers[k] = prop;\n            });\n        },\n        onEffect(provider) {\n            const used = [];\n            (provider._c || ['*']).forEach(name => {\n                const type = name === '*' ? '*' : this.getType(name);\n                if (used.indexOf(type) > -1) return;\n                used.push(type);\n                this.bus.$on(`p:${provider.attr}:${type}:${provider.input ? 1 : 0}`, (event, args) => {\n                    provider[event] && provider[event](...args);\n                });\n            });\n            provider._used = used;\n        },\n        watchEffect(ctx) {\n            const vm = this.vm;\n            Object.keys(ctx.rule.effect || {}).forEach(k => {\n                ctx.watch.push(vm.$watch(() => ctx.rule.effect[k], (n) => {\n                    this.effect(ctx, 'watch', {[k]: n});\n                }));\n            });\n        },\n        effect(ctx, event, custom) {\n            this.emitEffect({\n                rule: ctx.rule,\n                input: ctx.input,\n                type: ctx.trueType,\n                custom\n            }, event);\n        },\n        ruleEffect(rule, event) {\n            this.emitEffect({\n                rule,\n                input: !!rule.field,\n                type: this.getType(rule.type)\n            }, event);\n        },\n        emitEffect({rule, input, type, custom}, event) {\n            if (!type || type === 'fcFragment') return;\n            const effect = custom ? custom : (rule.effect || {});\n            Object.keys(effect).forEach(attr => {\n                const p = this.providers[attr];\n                if (!p || (p.input && !input)) return;\n                let _type;\n                if (!p._c) {\n                    _type = '*';\n                } else if (p._used.indexOf(type) > -1) {\n                    _type = type;\n                } else {\n                    return;\n                }\n                this.bus.$emit(`p:${attr}:${_type}:${p.input ? 1 : 0}`, event, [effect[attr], rule, this.api]);\n            });\n        }\n    });\n}\n\nfunction unique(arr) {\n    return arr.filter(function (item, index, arr) {\n        return arr.indexOf(item, 0) === index;\n    });\n}\n\nfunction getComponent(p) {\n    const c = p.components;\n    if (Array.isArray(c)) return unique(c.filter(v => v !== '*'));\n    else if (is.String(c)) return [c];\n    else return false;\n}\n","import Api from '../frame/api';\nimport Render from '../render';\nimport extend from '@form-create/utils/lib/extend';\nimport {funcProxy} from '../frame/util';\nimport useInject from './inject';\nimport usePage from './page';\nimport useRender from './render';\nimport useLoader from './loader';\nimport useInput from './input';\nimport useHelper from './helper';\nimport useContext from './context';\nimport useLifecycle from './lifecycle';\nimport useEffect from './effect';\n\n\nexport default function Handler(fc) {\n    extend(this, {\n        fc,\n        vm: fc.vm,\n        watching: false,\n        isMounted: false,\n        validate: {},\n        formData: {},\n        subForm: {},\n        form: {},\n        appendData: {},\n        providers: {},\n        cycleLoad: null,\n        loadedId: 1,\n        nextTick: null,\n        changeStatus: false,\n        pageEnd: true,\n        nextReload: () => {\n            this.lifecycle('reload');\n        }\n    });\n\n    funcProxy(this, {\n        options() {\n            return fc.options;\n        },\n        bus() {\n            return fc.bus;\n        },\n    })\n\n    this.initData(fc.rules);\n\n    this.$manager = new fc.manager(this);\n    this.$render = new Render(this);\n    this.api = Api(this);\n}\n\nextend(Handler.prototype, {\n    initData(rules) {\n        extend(this, {\n            fieldList: {},\n            ctxs: {},\n            customData: {},\n            sortList: [],\n            rules,\n            repeatRule: [],\n        });\n        useHelper(rules);\n    },\n    init() {\n        this.useProvider();\n        this.usePage();\n        this.loadRule();\n        this.$manager.__init();\n        this.vm.$set(this.vm, 'formData', this.formData);\n    },\n})\n\nuseInject(Handler);\nusePage(Handler);\nuseRender(Handler);\nuseLoader(Handler);\nuseInput(Handler);\nuseContext(Handler);\nuseLifecycle(Handler);\nuseEffect(Handler);\n","const NAME = 'fcFragment';\n\nexport default {\n    name: NAME,\n    functional: true,\n    render(h, ctx) {\n        return ctx.children\n    }\n}\n","import toLine from '@form-create/utils/lib/toline';\nimport is from '@form-create/utils/lib/type';\nimport toString from '@form-create/utils/lib/tostring';\nimport extend from '@form-create/utils/lib/extend';\n\nfunction parseProp(prop) {\n    if (is.String(prop))\n        return {domProps: {innerHTML: prop}};\n    return prop;\n}\n\nexport function CreateNodeFactory() {\n\n    const aliasMap = {};\n\n    function CreateNode(vm) {\n        vm && this.setVm(vm);\n    }\n\n    extend(CreateNode.prototype, {\n        setVm(vm) {\n            this.vm = vm;\n            this.$h = vm.$createElement;\n        },\n        make(nodeName, data, children) {\n            let Node = this.$h(nodeName, parseProp(data), children || []);\n            Node.context = this.vm;\n            return Node;\n        },\n        aliasMap\n    });\n\n    extend(CreateNode, {\n        aliasMap,\n        alias(alias, name) {\n            aliasMap[alias] = name;\n        },\n        use(nodes) {\n            Object.keys(nodes).forEach((k) => {\n                const line = toLine(k);\n                const lower = toString(k).toLocaleLowerCase();\n                const v = nodes[k];\n                [k, line, lower].forEach(n => {\n                    CreateNode.alias(k, v);\n                    CreateNode.prototype[n] = function (data, children) {\n                        return this.make(v, data, children);\n                    };\n                });\n            });\n        }\n    })\n\n    return CreateNode;\n}\n","import mergeProps from '@form-create/utils/lib/mergeprops';\nimport unique from '@form-create/utils/lib/unique';\nimport extend from '@form-create/utils/lib/extend';\n\nexport function createManager(proto) {\n    class CustomManager extends Manager {\n    }\n\n    Object.assign(CustomManager.prototype, proto);\n    return CustomManager;\n}\n\nexport default function Manager(handler) {\n    extend(this, {\n        $handle: handler,\n        vm: handler.vm,\n        options: {},\n        ref: 'fcForm',\n        mergeOptionsRule: {\n            normal: ['form', 'row', 'info', 'submitBtn', 'resetBtn']\n        }\n    });\n    this.updateKey();\n    this.init();\n}\n\nextend(Manager.prototype, {\n    __init() {\n        this.$render = this.$handle.$render;\n    },\n    updateKey() {\n        this.key = unique();\n    },\n    //TODO interface\n    init() {\n    },\n    update() {\n    },\n    beforeRender() {\n    },\n    form() {\n        return this.vm.$refs[this.ref];\n    },\n    mergeOptions(args, opt) {\n        return mergeProps(args.map(v => this.tidyOptions(v)), opt, this.mergeOptionsRule);\n    },\n    updateOptions(options) {\n        this.options = this.mergeOptions([options], this.getDefaultOptions());\n        this.update();\n    },\n    tidyOptions(options) {\n        return options;\n    },\n    tidyRule(ctx) {\n    },\n    mergeProp(ctx) {\n    },\n    getDefaultOptions() {\n        return {};\n    },\n    render(children) {\n    }\n})\n","import $FormCreate from '../components/formCreate';\nimport Vue from 'vue';\nimport makerFactory from '../factory/maker';\nimport Handle from '../handler';\nimport {creatorFactory} from '..';\nimport BaseParser from '../factory/parser';\nimport {copyRule, copyRules, mergeGlobal, parseJson} from './util';\nimport fragment from '../components/fragment';\nimport is from '@form-create/utils/lib/type';\nimport toCase from '@form-create/utils/lib/tocase';\nimport extend from '@form-create/utils/lib/extend';\nimport {CreateNodeFactory} from '../factory/node';\nimport {createManager} from '../factory/manager';\n\nexport let _vue = typeof window !== 'undefined' && window.Vue ? window.Vue : Vue;\n\nfunction _parseProp(name, id) {\n    let prop;\n    if (arguments.length === 2) {\n        prop = arguments[1];\n        id = prop[name];\n    } else {\n        prop = arguments[2];\n    }\n    return {id, prop};\n}\n\nfunction nameProp() {\n    return _parseProp('name', ...arguments);\n}\n\nfunction _getEl(options) {\n    if (!options || !options.el) return window.document.body;\n    return is.Element(options.el)\n        ? options.el\n        : document.querySelector(options.el);\n}\n\nfunction mountForm(rules, option) {\n    const $vm = new _vue({\n        data() {\n            //todo 外部无法修改\n            return {rule: rules, option: option || {}};\n        },\n        render(h) {\n            return h('FormCreate', {ref: 'fc', props: this.$data});\n        }\n    });\n    $vm.$mount();\n    return $vm;\n}\n\n//todo 表单嵌套\nexport default function FormCreateFactory(config) {\n\n    const components = {\n        [fragment.name]: fragment\n    };\n    const filters = {};\n    const parsers = {};\n    const directives = {};\n    const providers = {};\n    const maker = makerFactory();\n    let globalConfig = {global: {}};\n    const data = {};\n    const CreateNode = CreateNodeFactory();\n\n    function filter() {\n        const data = nameProp(...arguments);\n        if (data.id && data.prop) filters[data.id] = data.prop;\n    }\n\n    function directive() {\n        const data = nameProp(...arguments);\n        if (data.id && data.prop) directives[data.id] = data.prop;\n    }\n\n    function register() {\n        const data = _parseProp('attr', ...arguments);\n        if (data.id && data.prop) providers[data.id] = {...data.prop, attr: data.id};\n    }\n\n    function componentAlias(alias) {\n        CreateNode.use(alias);\n    }\n\n    function parser() {\n        const data = nameProp(...arguments);\n        if (!data.id || !data.prop) return;\n        const name = toCase(data.id);\n        const parser = data.prop;\n        parsers[name] = {...BaseParser, ...parser};\n        maker[name] = creatorFactory(name);\n        parser.maker && extend(maker, parser.maker);\n    }\n\n    function component(id, component) {\n        let name;\n        if (is.String(id)) {\n            name = toCase(id);\n            if (['form-create', 'formcreate'].indexOf(name) > -1) {\n                return $form();\n            } else if (component === undefined) {\n                return components[name];\n            }\n        } else {\n            name = toCase(id.name);\n            component = id;\n        }\n        if (!name || !component) return;\n        components[name] = component;\n        if (component.formCreateParser) parser(name, component.formCreateParser);\n    }\n\n    function $form() {\n        return _vue.extend($FormCreate(FormCreate));\n    }\n\n    //todo 检查回调函数作用域\n    function use(fn) {\n        if (is.Function(fn.install)) fn.install(create);\n        else if (is.Function(fn)) fn(create);\n        return this;\n    }\n\n    function create(rules, _opt, parent) {\n        let $vm = mountForm(rules, _opt || {});\n        const _this = $vm.$refs.fc.formCreate;\n        _this.$parent = parent;\n        _getEl(_this.options).appendChild($vm.$el);\n        return _this.api();\n    }\n\n    function FormCreate(vm, rules, options) {\n        extend(this, {\n            vm,\n            manager: createManager(config.manager),\n            parsers,\n            providers,\n            rules: Array.isArray(rules) ? rules : [],\n            prop: {\n                components,\n                filters,\n                directives,\n            },\n            CreateNode,\n            bus: new _vue\n        })\n        this.init();\n        this.initOptions(options || {});\n    }\n\n    extend(FormCreate.prototype, {\n        init() {\n            const vm = this.vm;\n            const h = new Handle(this);\n            this.$handle = h;\n            vm.$f = h.api;\n            vm.$emit('input', h.api);\n\n            vm.$on('hook:created', () => {\n                this.created();\n            })\n            vm.$on('hook:mounted', () => {\n                this.mounted();\n            });\n            vm.$on('hook:beforeDestroy', () => {\n                h.reloadRule([]);\n            });\n            vm.$on('hook:updated', () => {\n                h.bindNextTick(() => this.bus.$emit('next-tick', h.api));\n            });\n        },\n        initOptions(options) {\n            this.options = {formData: {}, ...globalConfig};\n            this.updateOptions(options);\n        },\n        updateOptions(options) {\n            if (options.global) {\n                this.options.global = mergeGlobal(this.options.global, options.global);\n            }\n            this.$handle.$manager.mergeOptions([options], this.options);\n            this.$handle.$manager.updateOptions(this.options);\n        },\n        created() {\n            this.$handle.init();\n        },\n        api() {\n            return this.$handle.api;\n        },\n        render() {\n            return this.$handle.render();\n        },\n        mounted() {\n            this.$handle.mounted();\n        },\n    })\n\n\n    function useAttr(formCreate) {\n        extend(formCreate, {\n            version: config.version,\n            ui: config.ui,\n            data,\n            maker,\n            component,\n            filter,\n            directive,\n            register,\n            parser,\n            use,\n            componentAlias,\n            copyRule,\n            copyRules,\n            $form,\n            parseJson\n        });\n    }\n\n    function useStatic(FormCreate) {\n        extend(FormCreate, {\n            create,\n            install(Vue, options) {\n                globalConfig = {...globalConfig, ...(options || {})}\n                if (Vue._installedFormCreate === true) return;\n                Vue._installedFormCreate = true;\n                _vue = Vue;\n\n                const $formCreate = function (rules, opt = {}) {\n                    return create(rules, opt, this);\n                };\n\n                useAttr($formCreate);\n\n                Vue.prototype.$formCreate = $formCreate;\n                Vue.component('FormCreate', $form());\n            },\n            init(rules, _opt = {}) {\n                let $vm = mountForm(rules, _opt), _this = $vm.$refs.fc.formCreate;\n                return {\n                    mount($el) {\n                        if ($el && is.Element($el))\n                            _this.options.el = $el;\n                        _getEl(_this.options).appendChild($vm.$el);\n                        return _this.api();\n                    },\n                    remove() {\n                        $vm.$el.parentNode && $vm.$el.parentNode.removeChild($vm.$el);\n                    },\n                    destroy() {\n                        this.remove();\n                        $vm.$destroy();\n                    },\n                    $f: _this.api()\n                };\n            }\n        })\n    }\n\n    useAttr(create);\n    useStatic(create);\n\n    CreateNode.use({fragment: 'fcFragment'});\n\n    if (config.install) create.use(config);\n\n    return create;\n}\n"],"names":["$set","target","field","value","Vue","set","$del","_extends","Object","assign","a","b","c","arguments","length","d","prototype","hasOwnProperty","call","extend","apply","this","is","type","arg","toString","Undef","v","Element","_typeof","nodeType","trueArray","data","Array","isArray","hasProperty","rule","k","forEach","t","NAME","$FormCreate","FormCreate","name","componentName","model","prop","props","required","option","api","formData","undefined","$f","isShow","unique","renderRule","updateValue","render","formCreate","methods","_refresh","_renderRule","_updateValue","_isDestroyed","JSON","stringify","$emit","watch","handler","n","setValue","deep","initOptions","refresh","every","_this","indexOf","$handle","reloadRule","beforeCreate","$options","propsData","observable","updateOptions","keys","_this2","normalMerge","toArrayMerge","functionalMerge","mergeProps","objects","initial","opt","_normalMerge","_toArrayMerge","_functionalMerge","propsMerge","reduce","key","arrA","arrB","event","hook","mergeFn","fn1","fn2","keyAttrs","arrayAttrs","normalAttrs","attrs","allAttrs","deepExtend","origin","mode","isArr","clone","nst","_clone","getRule","filter","__ctrl","deepCopy","format","msg","tip","console","warn","err","error","logError","e","PREFIX","SUFFIX","toJson","obj","val","_isVue","__inject","__origin","__emit","makeFn","fn","eval","parseJson","json","parse","replace","enumerable","writable","configurable","copyRule","copyRules","rules","mergeRule","merge","array","normal","Function","mergeGlobal","funcProxy","that","proxy","defineProperties","get","byCtx","__fc__","__origin__","invoke","def","debounce","wait","timeout","clearTimeout","setTimeout","String","toLine","line","toLocaleLowerCase","substr","id","uniqueId","Math","random","Number","Date","now","baseRule","on","validate","options","col","children","control","emit","link","hidden","creatorFactory","title","Creator","creatorTypeFactory","typeName","maker","_data","setProp","constructor","commonMaker","create","make","createTmp","template","vm","makerFactory","factory","typeFactory","Api","h","tidyFields","fields","copy","ctx","getCtx","$render","clearCache","byRules","ctxs","tidyBtnProp","btn","Boolean","show","form","fieldList","getValue","coverValue","appendData","removeField","rm","removeRule","destroy","$el","parentNode","removeChild","$destroy","append","after","child","index","sortList","root","splice","prepend","hiddenStatus","disabled","component","customData","bind","submitBtnProps","submitBtn","resetBtnProps","resetProps","reload","fc","refreshOptions","onSubmit","sync","updateKey","clear","clearCacheAll","$manager","hideForm","changeStatus","clearChangeStatus","updateRule","updateRules","updateValidate","updateValidates","validates","method","el","Error","exec","args","_this3","trigger","$refs","ref","closeModal","callback","subLen","state","subForm","___this","valid","sub","len","validFn","_this4","clearValidateState","validateField","resetFields","defaultValue","refreshControl","submit","successFn","failFn","_this5","clearSub","_this6","clearSubValidateState","getSubForm","loading","resetBtn","nextTick","bus","$once","changeValue","changeField","useCache","Render","initCache","cache","use","parent","setCache","vnode","getCache","toCase","toLocaleUpperCase","setTempProps","$props","inject","injectProp","injectKeys","formCreateField","formCreateOptions","formCreateRule","temp","useRender","initRender","renderList","clearOrgChildren","initOrgChildren","orgChildren","beforeRender","vn","map","renderCtx","makeVm","getInjectData","g","global","cacheConfig","originType","trueType","renderTemp","compile","$nextTick","parser","mounted","input","$on","onInput","renderAround","prefix","suffix","initProp","tidyRule","ctxProp","flag","renderChildren","makeWrap","custom","mergeProp","push","onMounted","addSubForm","getFormData","expression","effect","rmCtx","isRepeatRule","loadChildren","defaultRender","vNode","alias","aliasMap","$createElement","handle","CreateNode","useInject","Handler","parseInjectEvent","injectEvent","parseEmit","emitPrefix","emitKey","eventName","fieldKey","computed","self","_fn","watching","unshift","usePage","page","first","limit","getLimit","parseInt","pageEnd","pageLoad","pageFn","$off","loadRule","ceil","clearNextTick","bindNextTick","loadedId","RuleContext","wrapRef","linkOn","ctrlRule","updateType","update","useLoader","nextLoad","parseRule","_rule","fullRule","parseArray","ruleEffect","repeatRule","cycleLoad","_loadRule","syncForm","deleted","check","bindParser","appendValue","setCtx","_preIndex","preIndex","i","pre","r","updated","refreshUpdate","defineProperty","valueHandle","useCtrl","controls","getCtrl","handleFn","ctrl","findCtrl","reverse","ruleCon","ctrlCtx","_reloadRule","initData","nextReload","useInput","cacheValue","toValue","formValue","setFlag","setFormData","syncValue","valueChange","isQuote","isChange","toFormValue","refreshRule","appendLink","useHelper","findField","findName","find","concat","setParser","init","unwatch","un","unlink","watchTo","watchCtx","rmCtrl","getType","BaseParser","useContext","getParser","list","parsers","none","$watch","watchEffect","reloadFlag","_rmCtx","useLifecycle","_mounted","isMounted","lifecycle","useEffect","useProvider","ps","providers","_c","getComponent","onEffect","provider","used","attr","_used","emitEffect","p","_type","arr","item","components","manager","__init","functional","parseProp","domProps","innerHTML","CreateNodeFactory","setVm","$h","nodeName","Node","context","nodes","lower","createManager","proto","CustomManager","Manager","mergeOptionsRule","mergeOptions","tidyOptions","getDefaultOptions","_vue","window","_parseProp","nameProp","_getEl","document","querySelector","body","mountForm","$vm","$data","$mount","FormCreateFactory","config","fragment","filters","directives","globalConfig","directive","register","componentAlias","$form","formCreateParser","install","_opt","$parent","appendChild","useAttr","version","ui","Handle","created","_installedFormCreate","$formCreate","mount","remove","useStatic"],"mappings":";;;;;;g2GAEO,SAASA,KAAKC,EAAQC,EAAOC,GAChCC,IAAIC,IAAIJ,EAAQC,EAAOC,GAGpB,SAASG,KAAKL,EAAQC,GACzBE,WAAWH,EAAQC,GCLvB,IAAMK,SAAWC,OAAOC,QAAU,SAAUC,OACnC,IAAIC,EAAGC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,QAChC,IAAIG,KAAKJ,EAAIE,UAAUD,GACxBJ,OAAOQ,UAAUC,eAAeC,KAAKP,EAAGI,IAAOf,KAAKU,EAAGK,EAAGJ,EAAEI,WAI7DL,GAGI,SAASS,gBACbZ,SAASa,MAAMC,KAAMR,WCbhC,IAAMS,GAAK,CACPC,cAAKC,EAAKD,UACCf,OAAOQ,UAAUS,SAASP,KAAKM,KAAS,WAAaD,EAAO,KAEvEG,eAAMC,UACKA,MAAAA,GAEXC,iBAAQJ,SACkB,WAAfK,QAAOL,IAA4B,OAARA,GAAiC,IAAjBA,EAAIM,WAAmBR,GAAGd,OAAOgB,IAEvFO,mBAAUC,UACCC,MAAMC,QAAQF,IAASA,EAAKlB,OAAS,IAU7C,SAASqB,YAAYC,EAAMC,SACtB,GAAIpB,eAAeC,KAAKkB,EAAMC,GAP1C,CAAC,OAAQ,SAAU,WAAY,SAAU,UAAW,SAAU,UAAUC,SAAQ,SAAAC,GAC5EjB,GAAGiB,GAAK,SAAUf,UACPF,GAAGC,KAAKC,EAAKe,OCb5B,IAAMC,KAAO,aAGE,SAASC,YAAYC,SACzB,CACHC,KAAMH,KACNI,cAAeJ,KACfK,MAAO,CACHC,KAAM,OAEVC,MAAO,CACHX,KAAM,CACFb,KAAMU,MACNe,UAAU,GAEdC,OAAQ,CACJ1B,KAAMf,eACG,iBACE,KAGfL,MAAOK,OACP0C,IAAK1C,QAETwB,sBACW,CACHmB,cAAUC,EACVC,QAAID,EACJE,QAAQ,EACRC,OAAQ,EACRC,8BAAgBnC,KAAKe,MAAQ,IAC7BqB,YAAa,KAGrBC,yBACWrC,KAAKsC,WAAWD,UAE3BE,QAAS,CACLC,sBACMxC,KAAKkC,QAEXO,4BACSN,8BAAiBnC,KAAKe,MAAQ,KAEvC2B,sBAAa5D,GACLkB,KAAK2C,oBACJP,YAAcQ,KAAKC,UAAU/D,QAC7BgE,MAAM,eAAgBhE,MAGnCiE,MAAO,CACHjE,MAAO,CACHkE,iBAAQC,GACAL,KAAKC,UAAUI,KAAOjD,KAAKoC,kBAC1BJ,GAAGkB,SAASD,IAErBE,MAAM,GAEVvB,gBAAOqB,QACEX,WAAWc,YAAYH,QACvBjB,GAAGqB,WAEZtC,cAAKkC,cACGA,EAAExD,SAAWO,KAAKmC,WAAW1C,QAAUwD,EAAEK,OAAM,SAAAhD,UAAKiD,EAAKpB,WAAWqB,QAAQlD,IAAM,YACjFgC,WAAWmB,QAAQC,WAAWT,QAC9BR,iBAGbkB,qCACkC3D,KAAK4D,SAASC,UAArC9C,IAAAA,KAAMa,IAAAA,OAAQ9C,IAAAA,WAChBwD,WAAa,IAAIjB,EAAWrB,KAAMjB,IAAI+E,WAAW/C,GAAOhC,IAAI+E,WAAWlC,IAC5E9C,GAASmB,GAAGd,OAAOL,IAAUkB,KAAKsC,WAAWyB,cAAc,CAACjC,SAAUhD,IACtEK,OAAO6E,KAAKhE,KAAKsC,WAAWb,MAAMR,SAAQ,SAAAD,GACtClB,OAAOmE,EAAKL,SAAS5C,GAAIiD,EAAK3B,WAAWb,KAAKT,SC7EvD,IAAMkD,YAAc,CAAC,QAAS,QAAS,WAAY,eAC7CC,aAAe,CAAC,QAAS,QAAS,cAClCC,gBAAkB,CAAC,KAAM,YAEhCC,WAAa,SAAbA,EAAcC,OAASC,yDAAU,GAAIC,yDAAM,GACvCC,YAAmBP,+BAAgBM,EAAG,QAAc,KACpDE,YAAoBP,gCAAiBK,EAAG,OAAa,KACrDG,YAAuBP,mCAAoBI,EAAG,YAAkB,KAChEI,EAAaJ,EAAG,OAAa,UAE5BF,EAAQO,QAAO,SAACxF,EAAGC,OACjB,IAAMwF,KAAOxF,KACVD,EAAEyF,MACEF,EAAWpB,QAAQsB,IAAQ,EAC3BzF,EAAEyF,GAAOT,EAAW,CAAC/E,EAAEwF,IAAOzF,EAAEyF,SAC7B,GAAIL,EAAajB,QAAQsB,IAAQ,EACpCzF,EAAEyF,oCAAWzF,EAAEyF,IAASxF,EAAEwF,SACvB,GAAIJ,EAAclB,QAAQsB,IAAQ,EAAG,KAClCC,EAAO1F,EAAEyF,aAAgBlE,MAAQvB,EAAEyF,GAAO,CAACzF,EAAEyF,IAC7CE,EAAO1F,EAAEwF,aAAgBlE,MAAQtB,EAAEwF,GAAO,CAACxF,EAAEwF,IACnDzF,EAAEyF,gCAAWC,sBAASC,SACnB,GAAIL,EAAiBnB,QAAQsB,IAAQ,MACnC,IAAMG,KAAS3F,EAAEwF,MACdzF,EAAEyF,GAAKG,GAAQ,KACTF,EAAO1F,EAAEyF,GAAKG,aAAkBrE,MAAQvB,EAAEyF,GAAKG,GAAS,CAAC5F,EAAEyF,GAAKG,IAChED,EAAO1F,EAAEwF,GAAKG,aAAkBrE,MAAQtB,EAAEwF,GAAKG,GAAS,CAAC3F,EAAEwF,GAAKG,IACtE5F,EAAEyF,GAAKG,gCAAaF,sBAASC,SAE7B3F,EAAEyF,GAAKG,GAAS3F,EAAEwF,GAAKG,QAG5B,GAAY,SAARH,MACF,IAAII,KAAQ5F,EAAEwF,GACXzF,EAAEyF,GAAKI,GACP7F,EAAEyF,GAAKI,GAAQC,QAAQ9F,EAAEyF,GAAKI,GAAO5F,EAAEwF,GAAKI,IAE5C7F,EAAEyF,GAAKI,GAAQ5F,EAAEwF,GAAKI,QAI9B7F,EAAEyF,GAAOxF,EAAEwF,QAGXL,EAAajB,QAAQsB,IAAQ,GAAKH,EAAiBnB,QAAQsB,IAAQ,GAAKF,EAAWpB,QAAQsB,IAAQ,EACnGzF,EAAEyF,qBAAWxF,EAAEwF,IACRJ,EAAclB,QAAQsB,IAAQ,EACrCzF,EAAEyF,GAAOxF,EAAEwF,aAAgBlE,yBAAYtB,EAAEwF,IAA2B,WAAlBtE,QAAOlB,EAAEwF,sBAAwBxF,EAAEwF,IAAQ,CAACxF,EAAEwF,IAEhGzF,EAAEyF,GAAOxF,EAAEwF,UAGhBzF,IACRkF,IAGDY,QAAU,SAACC,EAAKC,UAClB,WACID,GAAOA,EAAIrF,MAAMC,KAAMR,WACvB6F,GAAOA,EAAItF,MAAMC,KAAMR,aCvDlB8F,SAAW,CAAC,OAAQ,OAAQ,aAAc,QAAS,OAAQ,QAAS,SAAU,OAAQ,SAAU,SAAU,UAAW,OAAQ,OAAQ,SAAU,SAAU,UAEzJC,WAAa,CAAC,WAAY,WAAY,UAAW,aAEjDC,YAAc,CAAC,MAAO,SAAU,QAEhCC,gBAAYH,4BAAapB,gCAAgBC,iCAAiBC,iBAAoBmB,WAAeC,aAE7FE,sCAAeD,QAAO,MAAO,QCR3B,SAASE,WAAWC,OAAQhH,yDAAS,GAAIiH,yCAChDC,GAAQ,MACP,IAAIhB,KAAOlG,KACRO,OAAOQ,UAAUC,eAAeC,KAAKjB,EAAQkG,GAAM,KAC/CiB,EAAQnH,EAAOkG,OACdgB,EAAQlF,MAAMC,QAAQkF,KAAW9F,GAAGd,OAAO4G,GAAQ,KAChDC,OAAsBjE,IAAhB6D,EAAOd,MACbgB,EACAA,GAAQ,EACRE,GAAOrH,KAAKiH,EAAQd,EAAK,SACtB,GAAIiB,EAAME,aAAmBlE,IAAT8D,EAAoB,KACvCA,EAGG,CACHlH,KAAKiH,EAAQd,EAAKiB,EAAME,mBAHxBF,EAAQA,EAAMG,UACdF,GAAOrH,KAAKiH,EAAQd,EAAK,SAM7BkB,GAAOrH,KAAKiH,EAAQd,EAAK,IAE7Bc,EAAOd,GAAOa,WAAWC,EAAOd,GAAMiB,EAAOF,QAE7ClH,KAAKiH,EAAQd,EAAKiB,eAIbhE,IAAT8D,GAAsBjF,MAAMC,QAAQ+E,GAAWA,EAAOO,QAAO,SAAA7F,UAAMA,IAAMA,EAAE8F,UAAUR,EAG1F,SAASS,SAASvH,UACd6G,WAAW,GAAI,CAAC7G,MAAAA,IAAQA,MClC5B,SAASwH,OAAOpG,EAAMqG,EAAKxF,SACtB,uBAAgBb,gBAAUqG,IAASxF,EAAQ,aAAe6B,KAAKC,UAAU9B,EAAKmF,QAAUnF,EAAKmF,UAAYnF,GAAS,IAGvH,SAASyF,IAAID,EAAKxF,GACrB0F,QAAQC,KAAKJ,OAAO,MAAOC,EAAKxF,IAG7B,SAAS4F,IAAIJ,EAAKxF,GACrB0F,QAAQG,MAAMN,OAAO,MAAOC,EAAKxF,IAG9B,SAAS8F,SAASC,GACrBH,IAAIG,EAAE1G,YACNqG,QAAQG,MAAME,GCRlB,IAAMC,OAAS,wBACTC,OAAS,wBAER,SAASC,OAAOC,UACZtE,KAAKC,UAAU8C,WAAW,GAAIuB,GAAK,IAAO,SAAUpC,EAAKqC,OACxDA,IAAsB,IAAfA,EAAIC,WAGI,mBAARD,SACAA,KAEPA,EAAIE,WACJF,EAAMA,EAAIG,WAEVH,EAAII,cAGDR,OAASI,EAAMH,WAI9B,SAASQ,OAAOC,WACLC,KAAK,sBAAwBD,GAAK,SAGtC,SAASE,UAAUC,EAAM/B,UACrBjD,KAAKiF,MAAMD,GAAM,SAAU5G,EAAGV,MAC7BL,GAAGI,MAAMC,KAAOA,EAAEkD,QAAS,OAAOlD,SAE9BA,EAAEkD,QAAQwD,QAAU,GAA2B,IAAtB1G,EAAEkD,QAAQuD,eAE5BS,QAAkC,KADzClH,EAAIA,EAAEwH,QAAQd,OAAQ,IAAIc,QAAQf,OAAQ,KAC1BvD,QAAQ,aAAyC,IAAnBlD,EAAEkD,QAAQ,KAAa,YAAclD,EAAIA,GACpF,IAAKuF,GAAQvF,EAAEkD,QAAQ,aAAe,EACzC,OAAOgE,OAAOlH,GACpB,MAAOwG,eACLH,mBAAYrG,WAGTA,KAIR,SAASyH,WAAWjJ,EAAOkJ,SACvB,CACHlJ,MAAAA,EACAiJ,YAAY,EACZE,cAAc,EACdD,WAAYA,GAKb,SAASE,SAASnH,EAAM8E,UACpBsC,UAAU,CAACpH,GAAO8E,IAAQ,GAAO,GAGrC,SAASsC,UAAUC,EAAOvC,UACtBF,WAAW,sBAAQyC,GAAQvC,IAAQ,GAGvC,SAASwC,UAAUtH,EAAMuH,UAC5BjE,WAAW,CAACiE,GAAQvH,EAAM,CAACwH,MAAOhD,WAAYiD,OAAQhD,cAC/CzE,EAGJ,SAASmF,QAAQnF,UACbd,GAAGwI,SAAS1H,EAAKmF,SAAWnF,EAAKmF,UAAYnF,EAGjD,SAAS2H,YAAY9J,EAAQ0J,OAC3B1J,EAAQ,OAAO0J,EACpBnJ,OAAO6E,KAAKsE,GAAS,IAAIrH,SAAQ,SAACD,GAC9BqH,UAAUzJ,EAAOoC,GAAIsH,EAAMtH,IAAM,OAIlC,SAAS2H,UAAUC,EAAMC,GAC5B1J,OAAO2J,iBAAiBF,EAAMzJ,OAAO6E,KAAK6E,GAAOhE,QAAO,SAACN,EAASvD,UAC9DuD,EAAQvD,GAAK,CACT+H,sBACWF,EAAM7H,OAGduD,IACR,KAGA,SAASyE,MAAMjI,UACXA,EAAKkI,SAAWlI,EAAKmI,WAAanI,EAAKmI,WAAWD,OAAS,MAG/D,SAASE,OAAO1B,EAAI2B,OAEnBA,EAAM3B,IACR,MAAOX,GACLD,SAASC,UAENsC,ECvGI,SAASC,SAAS5B,EAAI6B,OAC7BC,EAAU,YACP,6CAAapJ,2BAAAA,kBACA,OAAZoJ,GACAC,aAAaD,GACjBA,EAAUE,YAAW,kBAAMhC,EAAG5H,WAAH4H,GAAQlE,UAASpD,MAAMmJ,ICL3C,SAASlJ,SAAS+G,UACf,MAAPA,EACD,GACe,WAAf3G,QAAO2G,GACHvE,KAAKC,UAAUsE,EAAK,KAAM,GAC1BuC,OAAOvC,GCLN,SAASwC,OAAOrI,OACvBsI,EAAOtI,EAAKwG,QAAQ,WAAY,OAAO+B,2BACjB,IAAtBD,EAAKpG,QAAQ,OACboG,EAAOA,EAAKE,OAAO,IAChBF,ECJX,IAAIG,GAAK,EAEM,SAASC,kBACbC,KAAKC,SAAS9J,SAAS,IAAI0J,OAAO,EAAG,GAAKK,iBAAUC,KAAKC,gBAAUN,KAAM3J,SAAS,ICGtF,SAASkK,iBACL,CACH5I,MAAO,GACP6I,GAAI,GACJC,SAAU,GACVC,QAAS,GACTC,IAAK,GACLC,SAAU,GACVC,QAAS,GACTC,KAAM,GACNC,KAAM,GACNC,QAAQ,EACRjM,MAAO,MAIR,SAASkM,eAAe1J,UACpB,SAAC2J,EAAOpM,EAAOC,OAAO4C,yDAAQ,UAAO,IAAIwJ,QAAQ5J,EAAM2J,EAAOpM,EAAOC,EAAO4C,IAGhF,SAASyJ,mBAAmB7J,EAAMpB,OAAMkL,yDAAW,cAC/C,SAACH,EAAOpM,EAAOC,OAAO4C,yDAAQ,GAC3B2J,EAAQ,IAAIH,QAAQ5J,EAAM2J,EAAOpM,EAAOC,EAAO4C,UACjDzB,GAAGwI,SAASvI,GAAOA,EAAKmL,GACvBA,EAAM3J,MAAM0J,EAAUlL,GACpBmL,GAIA,SAASH,QAAQhL,EAAM+K,EAAOpM,EAAOC,EAAO4C,QAClD4J,MAAQxL,OAAOwK,WAAY,CAACpK,KAAAA,EAAM+K,MAAAA,EAAOpM,MAAAA,EAAOC,MAAAA,EAAO4C,MAAOA,GAAS,UACvEuD,MAAQjF,KAAKuK,GAGtBzK,OAAOoL,QAAQvL,UAAW,CACtBuG,0BACWlG,KAAKsL,OAEhBC,iBAAQzG,EAAKhG,UACTH,KAAKqB,KAAKsL,MAAOxG,EAAKhG,GACfkB,MAEXiG,sBACUF,EAAQ,IAAI/F,KAAKwL,mBACvBzF,EAAMuF,MAAQpD,SAASlI,KAAKsL,OACrBvF,KAIfN,MAAMxE,SAAQ,SAAAK,GACV4J,QAAQvL,UAAU2B,GAAQ,SAAUwD,UAChCuD,UAAUrI,KAAKsL,yBAAShK,EAAO9B,UAAUC,OAAS,EAAIqF,qBAAQA,EAAMtF,UAAU,MACvEQ,SCxDf,IAAMyL,YAAcT,eAAe,IAE5B,SAASU,OAAOxL,EAAMrB,EAAOoM,OAC5BU,EAAOF,YAAY,GAAI5M,UAC3B8M,EAAKL,MAAMpL,KAAOA,EAClByL,EAAKL,MAAML,MAAQA,EACZU,EAGJ,SAASC,UAAUC,EAAUC,EAAIjN,EAAOoM,OACvCU,EAAOF,YAAY,GAAI5M,UAC3B8M,EAAKL,MAAMpL,KAAO,WAClByL,EAAKL,MAAMO,SAAWA,EACtBF,EAAKL,MAAML,MAAQA,EACnBU,EAAKL,MAAMQ,GAAKA,EACTH,EAGI,SAASI,qBACb,CACHL,OAAAA,OACAE,UAAAA,UACAC,SAAUD,UACVI,QAAShB,eACTiB,YAAad,oBCnBN,SAASe,IAAIC,YAEfC,EAAWC,UACZpM,GAAGI,MAAMgM,GACTA,EAASF,EAAEE,SACLzL,MAAMC,QAAQwL,KACpBA,EAAS,CAACA,IACPA,WAGFC,EAAKxN,UACHuH,SAASvH,YAGX4C,EAAM2K,EAAQvH,EAAKqC,GACxBiF,EAAWC,GAAQpL,SAAQ,SAAApC,OACjB0N,EAAMJ,EAAEK,OAAO3N,GAChB0N,IACL5N,KAAK4N,EAAIxL,KAAM+D,EAAKqC,GACpBgF,EAAEM,QAAQC,WAAWH,gBAIpBI,EAAQC,EAAMhH,UACZzG,OAAO6E,KAAK4I,GAAM/H,QAAO,SAACN,EAASO,UACtCP,EAAQO,GAAOc,EAASgH,EAAK9H,GAAKc,OAASgH,EAAK9H,GAAK/D,KAC9CwD,IACR,aAGEsI,EAAYC,EAAK1D,UAClBnJ,GAAG8M,QAAQD,GACXA,EAAM,CAACE,KAAMF,GACP7M,GAAGI,MAAMyM,IAAS7M,GAAGd,OAAO2N,KAAMA,EAAM,CAACE,KAAM5D,IAClD0D,MAGLjL,EAAM,qBAEGsK,EAAE1B,8BAGF0B,EAAE1B,2BAGF0B,EAAEc,wBAGFd,EAAE/D,OAEbtG,kBAASuK,UACED,EAAWC,GAAQxH,QAAO,SAACN,EAASwF,OACjCwC,EAAMJ,EAAEe,UAAUnD,UACnBwC,GACLhI,EAAQgI,EAAI1N,OAASyN,EAAKC,EAAIxL,KAAKjC,OAC5ByF,GAFUA,IAGlB,KAEP4I,kBAAStO,OACC0N,EAAMJ,EAAEe,UAAUrO,MACnB0N,SACED,EAAKC,EAAIxL,KAAKjC,QAEzBsO,oBAAWtL,GACP3C,OAAO6E,KAAKmI,EAAEe,WAAWjM,SAAQ,SAAA6D,OACvByH,EAAMJ,EAAEe,UAAUpI,OACnByH,EAAK,OAAOJ,EAAEkB,WAAWvI,GAAOhD,EAASgD,GAC9CyH,EAAIxL,KAAKjC,MAAQgC,YAAYgB,EAAUgD,GAAOhD,EAASgD,QAAO/C,MAGtEmB,kBAASrE,OACDiD,EAAWjD,EACXW,UAAUC,QAAU,IACpBqC,qBAAajD,EAAQW,UAAU,KACnCL,OAAO6E,KAAKlC,GAAUb,SAAQ,SAAA6D,OACpByH,EAAMJ,EAAEe,UAAUpI,OACnByH,EAAK,OAAOJ,EAAEkB,WAAWvI,GAAOhD,EAASgD,GAC9CyH,EAAIxL,KAAKjC,MAAQgD,EAASgD,OAGlCwI,qBAAYzO,OACJ0N,EAAMJ,EAAEK,OAAO3N,MACd0N,SACLA,EAAIgB,KACGhB,EAAI3G,QAEf4H,oBAAWzM,OACDwL,EAAMxL,GAAQiI,MAAMjI,MACrBwL,SACLA,EAAIgB,KACGhB,EAAI3G,QAEf6H,QAAS,WACLtB,EAAEL,GAAG4B,IAAIC,YAAcxB,EAAEL,GAAG4B,IAAIC,WAAWC,YAAYzB,EAAEL,GAAG4B,KAC5DvB,EAAEL,GAAG+B,YAETxB,OAAQ,kBAAMF,EAAEE,UAChByB,OAAQ,SAAC/M,EAAMgN,EAAOC,OACgD5F,EAA9DiE,EAASlN,OAAO6E,KAAKmI,EAAEe,WAAYe,EAAQ9B,EAAE+B,SAASzO,UAEtDsB,EAAKlC,OAASwN,EAAO7I,QAAQzC,EAAKlC,QAAU,EAC5C,OAAO8H,cAAO5F,EAAKlC,gBAAekC,OAEhCwL,EAAMJ,EAAEK,OAAOuB,GAEjBxB,EACIyB,GACA5F,EAAQmE,EAAIxL,KAAK4J,SACjBsD,EAAQ1B,EAAIxL,KAAK4J,SAASlL,SAE1BwO,EAAQ1B,EAAI4B,KAAK3K,QAAQ+I,EAAI3G,QAC7BwC,EAAQmE,EAAI4B,MAEb/F,EAAQ+D,EAAE/D,MACjBA,EAAMgG,OAAOH,EAAQ,EAAG,EAAGlN,IAE/BsN,QAAS,SAACtN,EAAMgN,EAAOC,OAC+B5F,EAA9CiE,EAASlN,OAAO6E,KAAKmI,EAAEe,WAAYe,EAAQ,KAE3ClN,EAAKlC,OAASwN,EAAO7I,QAAQzC,EAAKlC,QAAU,EAC5C,OAAO8H,cAAO5F,EAAKlC,gBAAekC,OAEhCwL,EAAMJ,EAAEK,OAAOuB,GAEjBxB,EACIyB,EACA5F,EAAQmE,EAAIxL,KAAK4J,UAEjBsD,EAAQ1B,EAAI4B,KAAK3K,QAAQ+I,EAAI3G,QAC7BwC,EAAQmE,EAAI4B,MAEb/F,EAAQ+D,EAAE/D,MACjBA,EAAMgG,OAAOH,EAAO,EAAGlN,IAE3BgK,gBAAOA,EAAQsB,GACX3K,EAAM2K,EAAQ,WAAYtB,GAC1BoB,EAAE9I,WAENiL,sBAAavE,OACHwC,EAAMJ,EAAEK,OAAOzC,MAChBwC,UACIA,EAAIxL,KAAKgK,QAEtBwD,kBAASA,EAAUlC,GACfD,EAAWC,GAAQpL,SAAQ,SAACpC,OAClB0N,EAAMJ,EAAEe,UAAUrO,GACnB0N,GACL5N,KAAK4N,EAAIxL,KAAKW,MAAO,aAAc6M,MAEvCpC,EAAE9I,WAEN7B,eAAMoE,UACK+G,EAAQR,EAAEe,UAAWtH,IAEhC4I,mBAAU5I,UACC+G,EAAQR,EAAEsC,WAAY7I,IAEjC8I,uBACWvP,OAAO2J,iBAAiB,GAAI3J,OAAO6E,KAAKmI,EAAEe,WAAWrI,QAAO,SAACN,EAAS1F,OACnE0N,EAAMJ,EAAEe,UAAUrO,UACxB0F,EAAQ1F,GAAS,CACbkK,sBACWwD,EAAIxL,KAAKjC,OAEpBE,aAAIF,GACAyN,EAAIxL,KAAKjC,MAAQA,GAErBiJ,YAAY,EACZE,cAAc,GAEX1D,IACR,MAEPoK,eAAgB,eAACjN,yDAAQ,GACjBoL,EAAMD,EAAYV,EAAE1B,QAAQmE,WAAW,GAC3C9O,OAAOgN,EAAKpL,GACZyK,EAAE1B,QAAQmE,UAAY9B,EACtBjL,EAAIwB,WAERwL,cAAe,eAACnN,yDAAQ,GAChBoL,EAAMD,EAAYV,EAAE1B,QAAQqE,YAAY,GAC5ChP,OAAOgN,EAAKpL,GACZyK,EAAE1B,QAAQqE,WAAahC,EACvBjL,EAAIwB,WAER0L,OAAQ,SAAC3G,GACL+D,EAAEzI,WAAW0E,IAEjBrE,uBAAc0G,GACV0B,EAAE6C,GAAGjL,cAAc0G,GACnB5I,EAAIoN,kBAERC,kBAASzH,QACA1D,cAAc,CAACmL,SAAUzH,KAElC0H,KAAM,SAACtQ,OACG0N,EAAMtM,GAAGd,OAAON,GAASmK,MAAMnK,GAASsN,EAAEK,OAAO3N,GACnD0N,IACAA,EAAI6C,WAAU,GACdjD,EAAEM,QAAQC,WAAWH,GACrBJ,EAAE9I,YAGVA,QAAS,SAACgM,GACNlD,EAAEM,QAAQ6C,gBACVD,GAASlD,EAAEoD,SAASH,YACpBjD,EAAE9I,WAEN4L,0BACI9C,EAAEoD,SAASxL,cAAcoI,EAAE1B,cACtBpH,WAETmM,SAAU,SAACvN,GACPtD,KAAKwN,EAAEL,GAAI,UAAW7J,IAE1BwN,aAAc,kBACHtD,EAAEsD,cAEbC,kBAAmB,WACfvD,EAAEsD,cAAe,GAErBE,WAAY,SAAC5F,EAAIhJ,OACPwL,EAAMJ,EAAEK,OAAOzC,GACjBwC,GACAlE,UAAUkE,EAAIxL,KAAMA,IAG5BmF,QAAS,SAAC6D,EAAInE,OACJ2G,EAAMJ,EAAEK,OAAOzC,MACjBwC,SACO3G,EAAS2G,EAAI3G,OAAS2G,EAAIxL,MAGzC6O,qBAAYxH,cACRjJ,OAAO6E,KAAKoE,GAAOnH,SAAQ,SAAA8I,GACvBxG,EAAKoM,WAAW5F,EAAI3B,EAAM2B,QAGlC8F,wBAAe9F,EAAIS,EAAUlC,GACrBA,OACKqH,WAAW5F,EAAI,CAACS,SAAAA,IAErB9I,EAAMqI,EAAI,WAAYS,IAG9BsF,yBAAgBC,EAAWzH,cACvBnJ,OAAO6E,KAAK+L,GAAW9O,SAAQ,SAAA8I,GAC3B9F,EAAK4L,eAAe9F,EAAIgG,EAAUhG,GAAKzB,OAG/C0H,gBAAOjG,EAAIzI,OACD2O,EAAKjQ,KAAKiQ,GAAGlG,OACdkG,IAAOA,EAAG3O,GACX,MAAM,IAAI4O,MAAM5J,OAAO,gBAAUhF,oBAC9B,kBACI2O,EAAG3O,SAAH2O,eAGfE,cAAKpG,EAAIzI,qCAAS8O,mCAAAA,2BACPjH,QAAO,kBAAMkH,EAAKL,OAAOjG,EAAIzI,gBAAS8O,OAEjDnJ,yBACWA,OAAOjH,KAAKe,OAEvBuP,iBAAQvG,EAAI9E,WACFgL,EAAKjQ,KAAKiQ,GAAGlG,sBADDqG,mCAAAA,oBAElBH,GAAMA,EAAGnN,YAAHmN,GAAShL,UAAUmL,KAE7BH,YAAGlG,OACOwC,EAAMJ,EAAEK,OAAOzC,MACjBwC,EAAK,OAAOA,EAAI0D,IAAM9D,EAAEL,GAAGyE,MAAMhE,EAAIiE,MAE7CC,WAAY,SAAC1G,OACHkG,EAAKpO,EAAIoO,GAAGlG,GAClBkG,GAAMA,EAAGnN,OAASmN,EAAGnN,MAAM,gBAG/B0H,kBAASkG,OAgBsBC,SAfvBC,GAAQ,EACRC,mCACG,CACCC,QAAS,CACLtG,kBAAS3K,GACLsM,EAAEoD,SAAS/E,UAAS,SAACuG,GACjBlR,GAAQA,EAAKkR,UAIvB5E,EAAE0E,SAER7M,EAAO7E,OAAO6E,KAAK6M,GAAS1K,QAAO,SAAAtH,OACzBmS,EAAMH,EAAQhS,UACb+B,MAAMC,QAAQmQ,GAAOA,EAAIvR,QAAUQ,GAAGI,MAAM2Q,MACnDC,EAAMjN,EAAKvE,OACbyR,EAAU,SAACH,EAAOlS,GAChBkS,EACIJ,EAAS,EAAGA,IACPM,EAAM,EAAGA,IACbP,GAAS,IAETE,IACDF,GAAS,GACTE,GAAQ,GAEZ/R,GAASsS,EAAKC,mBAAmBvS,GAAO,KAIhDmF,EAAK/C,SAAQ,SAAApC,OACLmS,EAAMH,EAAQhS,GACd+B,MAAMC,QAAQmQ,IACdL,EAASK,EAAIvR,OACbuR,EAAI/P,SAAQ,SAAAgM,GACRA,EAAKzC,UAAS,SAAClK,UAAM4Q,EAAQ5Q,EAAGzB,UAE7BmS,IACPL,EAAS,EACTK,EAAIxG,SAAS0G,QAMzBG,cAAe,SAACxS,EAAO6R,GACdvE,EAAEe,UAAUrO,IAEjBsN,EAAEoD,SAAS8B,cAAcxS,EAAO6R,IAEpCY,qBAAYjF,OACJO,EAAOT,EAAEe,UACbd,EAAWC,GAAQpL,SAAQ,SAAApC,OACnB0N,EAAMK,EAAK/N,GACV0N,IACLJ,EAAEM,QAAQC,WAAWH,GACrBA,EAAIxL,KAAKjC,MAAQwN,EAAKC,EAAIgF,cAC1BpF,EAAEqF,eAAejF,QAGzBkF,gBAAOC,EAAWC,mBACTnH,UAAS,SAACuG,MACPA,EAAO,KACHjP,EAAW8P,EAAK9P,WAChB7B,GAAGwI,SAASiJ,GACZA,EAAU5P,EAAU8P,IAEpB3R,GAAGwI,SAAS0D,EAAE1B,QAAQyE,WAAa/F,QAAO,kBAAMgD,EAAE1B,QAAQyE,SAASpN,EAAU8P,MAC7EzF,EAAEL,GAAGhJ,MAAM,SAAUhB,EAAU8P,SAGnC3R,GAAGwI,SAASkJ,IAAWxI,QAAO,kBAAMwI,EAAOC,UAIvDR,4BAAmB/E,cAAQwF,6DACvBzF,EAAWC,GAAQpL,SAAQ,SAAApC,GACnBgT,GAAUC,EAAKC,sBAAsBlT,OACnC0N,EAAMJ,EAAEe,UAAUrO,GACnB0N,GACLJ,EAAEoD,SAAS6B,mBAAmB7E,OAGtCwF,+BAAsB1F,GAClBD,EAAWC,GAAQpL,SAAQ,SAAApC,OACjBgS,EAAU1E,EAAE0E,QAAQhS,GACrBgS,IACDjQ,MAAMC,QAAQgQ,GACdA,EAAQ5P,SAAQ,SAAAgM,GACZA,EAAKmE,wBAEFP,GACPA,EAAQO,0BAIpBY,oBAAWnT,UACAsN,EAAE0E,QAAQhS,IAErBiO,IAAK,CACDmF,QAAS,eAACA,6DACNpQ,EAAI8M,eAAe,CAACsD,UAAWA,KAEnC1D,SAAU,eAACA,6DACP1M,EAAI8M,eAAe,CAACJ,WAAYA,KAEpCvB,KAAM,eAAC/K,6DACHJ,EAAI8M,eAAe,CAAC3B,OAAQ/K,MAGpCiQ,SAAU,CACND,QAAS,eAACA,6DACNpQ,EAAIgN,cAAc,CAACoD,UAAWA,KAElC1D,SAAU,eAACA,6DACP1M,EAAIgN,cAAc,CAACN,WAAYA,KAEnCvB,KAAM,eAAC/K,6DACHJ,EAAIgN,cAAc,CAAC7B,OAAQ/K,MAGnCkQ,kBAAS1K,GACL0E,EAAEiG,IAAIC,MAAM,YAAa5K,GACzB0E,EAAE9I,mBAKT,KAAM,OAAQ,MAAO,OAAOpC,SAAQ,SAAAgC,GACjCpB,EAAIoB,GAAK,oBACLkJ,EAAEL,eAAO7I,2BAIjBpB,EAAIyQ,YAAczQ,EAAI0Q,YAAc1Q,EAAIqB,SAEjCrB,ECnaI,SAAS2Q,SAASC,GAC7B3S,OAAO2S,EAAO9S,UAAW,CACrB+S,0BACSpD,iBAET5C,oBAAWH,MACFvM,KAAK2S,MAAMpG,EAAIxC,OAIW,IAA3B/J,KAAK2S,MAAMpG,EAAIxC,IAAI6I,KAAgB5S,KAAK2S,MAAMpG,EAAIxC,IAAI8I,cACjDpP,QAAQJ,cAEXwP,EAAS7S,KAAK2S,MAAMpG,EAAIxC,IAAI8I,YAC7BF,MAAMpG,EAAIxC,IAAM,KACrB8I,GAAU7S,KAAK0M,WAAWmG,QARtBtG,EAAIsG,QAAU7S,KAAK0M,WAAWH,EAAIsG,SAU1CvD,8BACSqD,MAAQ,IAEjBG,kBAASvG,EAAKwG,EAAOF,QACZF,MAAMpG,EAAIxC,IAAM,CACjBgJ,MAAAA,EACAH,KAAK,EACLC,OAAAA,IAGRG,kBAASzG,OACCoG,EAAQ3S,KAAK2S,MAAMpG,EAAIxC,WAC7B4I,EAAMC,KAAM,EACLD,EAAMI,SChCV,SAASE,OAAO3R,UACpBA,EAAKwG,QAAQ,aAAa,SAAUxH,UAChCA,EAAEwH,QAAQ,IAAK,IAAIoL,uBCMlC,SAASC,aAAarH,EAAIS,EAAK1K,MACtBiK,EAAGsH,YAED3R,EAAQ8K,EAAR9K,KACDuC,EAAO7E,OAAO6E,KAAK8H,EAAGsH,QACtBC,EAASC,WAAW/G,EAAK1K,GACzB0R,EAAapU,OAAO6E,KAAKqP,GAE/BrP,EAAK/C,SAAQ,SAAA6D,GACLhE,YAAYW,EAAKC,MAAOoD,GACxBgH,EAAGsH,OAAOtO,GAAOrD,EAAKC,MAAMoD,GACvByO,EAAW/P,QAAQsB,IAAQ,IAAGgH,EAAGsH,OAAOtO,GAAOuO,EAAOvO,WAG7DA,EAAOgH,EAAGlI,SAASpC,OAASsK,EAAGlI,SAASpC,MAAMC,MAAS,QACzDuC,EAAKR,QAAQsB,IAAQ,IACrBgH,EAAGsH,OAAOtO,GAAOrD,EAAK3C,QAI9B,SAASwU,WAAW/G,EAAK1K,SACd,CACHS,WAAYT,EACZ2R,gBAAiBjH,EAAI1N,MACrB4U,kBAAmBlH,EAAIxL,KAAK0J,QAC5BiJ,gBACUC,oBAAWpH,EAAI9K,MACdkS,EAAKpJ,GAAKoJ,EAAKpJ,qBAASoJ,EAAKpJ,IAAM,GAAIoJ,IAFjC,IACPA,EAOH,SAASC,UAAUnB,GAC9B3S,OAAO2S,EAAO9S,UAAW,CACrBkU,2BACSC,WAAa,QACbC,oBAETC,+BACUpH,EAAO5M,KAAKyD,QAAQmJ,UACrBqH,YAAc9U,OAAO6E,KAAK4I,GAAM/H,QAAO,SAACN,EAASwF,OAC5CY,EAAWiC,EAAK7C,GAAIhJ,KAAK4J,gBAC/BpG,EAAQwF,GAAM9J,GAAGS,UAAUiK,sBAAgBA,GAAY,GAEhDpG,IACR,KAGPwP,iCACSE,YAAc,IAEvB5R,gCACSrC,KAAK8L,GAAG7J,aAGRsN,SAAS2E,mBAERC,EAAKnU,KAAKkO,SAASkG,KAAI,SAACrK,UACnBxG,EAAK8Q,UAAU9Q,EAAKE,QAAQmJ,KAAK7C,OACzC5D,QAAO,SAACgB,eAAgBpF,IAARoF,YAEZnH,KAAKuP,SAASlN,OAAO8R,KAEhCG,gBAAOvT,cACG+K,EAAK/K,EAAK+K,UACXA,EAEI7L,GAAGwI,SAASqD,GACV3C,QAAO,kBAAM2C,EAAG7H,EAAKR,QAAQ8Q,cAAcxT,OAC5C+K,EAAG1E,OAEN0E,EADI,IAAI/M,KAAI+M,GAJR,IAAI/M,MAOnB2J,qBAAY6D,OACFiI,EAAIxU,KAAKyD,QAAQgH,QAAQgK,OAC1BD,IAEAjI,EAAImI,cACLnI,EAAImI,YAAcF,EAAEjI,EAAIoI,aAAeH,EAAEjI,EAAIrM,OAASsU,EAAEjI,EAAIqI,WAAa,IAC7ErI,EAAI9K,KAAO4C,WAAW,CAACmQ,EAAE,KAAMjI,EAAImI,YAAanI,EAAI9K,SAExDoT,oBAAWtI,kBACFxN,KAAI+V,eACLtO,IAAI,yCACG,OAELzF,EAAOwL,EAAI9K,KACVsI,EAAWwC,EAAXxC,GAAIjF,EAAOyH,EAAPzH,QAEN9E,KAAK8T,WAAW/J,GAAK,CACjBwC,EAAI0D,KACL1D,EAAI0D,GAAKjQ,KAAKsU,OAAOvT,QAChB+K,GAAGiJ,WAAU,kBAAMxI,EAAIyI,OAAOC,QAAQ1I,WAG3CT,EAAKS,EAAI0D,GACT1D,EAAI2I,OACJpJ,EAAGqJ,IAAKrJ,EAAGlI,SAASpC,OAASsK,EAAGlI,SAASpC,MAAMyD,OAAU,SAAS,SAACnG,GAC/DuR,EAAK+E,QAAQ7I,EAAKzN,WAGrBgV,WAAW/J,GAAM,CAClB+B,GAAAA,EACAD,SAAU9M,KAAI+V,QAAQ/T,EAAK8K,iBAIZ7L,KAAK8T,WAAW/J,GAAhC+B,IAAAA,GAAID,IAAAA,SAEXsH,aAAarH,EAAIS,EAAKvM,KAAKyD,QAAQ5B,SAE7BsS,EAAKtI,EAASxJ,OAAOxC,KAAKiM,UAE5B7L,GAAGI,MAAM8T,EAAGxT,QAAOwT,EAAGxT,KAAO,IACjCwT,EAAGrP,IAAMA,EACTqP,EAAGxT,KAAK6P,IAAMjE,EAAIiE,IAClB2D,EAAGxT,KAAKmE,IAAMA,EACPqP,GAEXkB,sBAAalB,EAAI5H,OACP9K,EAAO8K,EAAI9K,WACV,CAACA,EAAK6T,aAAUvT,EAAWoS,EAAI1S,EAAK8T,aAAUxT,IAEzDsS,mBAAU9H,EAAKsG,MACM,WAAbtG,EAAIrM,UACHF,KAAK2S,MAAMpG,EAAIxC,KAAoB,aAAbwC,EAAIrM,KAAqB,CAChDqM,EAAIiJ,gBACC9M,YAAY6D,QACZgD,SAASkG,SAASlJ,QAClBmJ,QAAQnJ,OACW4H,EAAnBjU,EAAcqM,EAAdrM,KAAMuB,EAAQ8K,EAAR9K,QACPA,EAAKsJ,OAAQ,WACb4K,GAASpJ,EAAI2I,OAASjV,GAAGI,MAAMoB,iBAE/B0S,EADS,aAATjU,GAAuBuB,EAAKoK,SACvB7L,KAAK6U,WAAWtI,GAEhBA,EAAIyI,OAAO3S,OAAOrC,KAAK4V,eAAerJ,GAAMA,GAErD4H,EAAKnU,KAAKqV,aAAalB,EAAI5H,GACtBoJ,IAAwB,IAAhBlU,WACT0S,EAAKnU,KAAKuP,SAASsG,SAAStJ,EAAK4H,SAChCrB,SAASvG,EAAK4H,EAAItB,GAChBsB,SAGJnU,KAAKgT,SAASzG,KAEzBmJ,iBAAQnJ,EAAKuJ,cACFtF,EAAYjE,EAAZiE,IAAK1L,EAAOyH,EAAPzH,SACPyK,SAASwG,UAAUxJ,EAAKuJ,GAC7BvJ,EAAIyI,OAAOe,UAAUxJ,EAAKuJ,OACpBpU,EAAQ,CACV,CACIA,MAAO4R,WAAW/G,EAAKvM,KAAKyD,QAAQ5B,KACpC2O,IAAKA,EACL1L,cAAQA,iBAIXgR,GACDpU,EAAMsU,KAAK,CACPzL,GAAI,gBACgB,WACZ4G,EAAK8E,UAAU1J,kBAEJ,SAACsE,GACZM,EAAK1N,QAAQyS,WAAW3J,EAAKsE,KAGrCrP,MAAO+K,EAAI2I,MAAQ,CACfpW,MAAOkB,KAAKyD,QAAQ0S,YAAY5J,GAChCmE,SAAU,SAAC5R,GACPqS,EAAKiE,QAAQ7I,EAAKzN,IAEtBsX,8BAAwB7J,EAAI1N,aAC5BkD,IAGZsC,WAAW3C,EAAO6K,EAAI9K,MACf8K,EAAI9K,MAEfwU,mBAAU1J,GACNA,EAAI0D,GAAKjQ,KAAK8L,GAAGyE,MAAMhE,EAAIiE,KAC3BjE,EAAIyI,OAAOC,QAAQ1I,QACd9I,QAAQ4S,OAAO9J,EAAK,YAE7B6I,iBAAQ7I,EAAKzN,QACJ2E,QAAQ2R,QAAQ7I,EAAKzN,IAE9B8W,wBAAerJ,cACJ5B,EAAY4B,EAAIxL,KAAhB4J,SAAsBsJ,EAAcjU,KAAKiU,YAAY1H,EAAIxC,WAE3D9J,GAAGS,UAAUiK,IAAasJ,GAC3BA,EAAYhT,SAAQ,SAAA+M,IACX/N,GAAGyJ,OAAOsE,IAAUA,EAAM/E,QAC3B2I,EAAKnO,QAAQ6S,MAAMtI,EAAM/E,gBAG5BgL,YAAY1H,EAAIxC,IAAM,GACpB,KAGXkK,GAAeA,EAAYhT,SAAQ,SAAA+M,IACE,IAA7BrD,EAASnH,QAAQwK,KAAkB/N,GAAGyJ,OAAOsE,IAAUA,EAAM/E,QAC7D2I,EAAKnO,QAAQ6S,MAAMtI,EAAM/E,WAI1B0B,EAASyJ,KAAI,SAAApG,UACZ/N,GAAGyJ,OAAOsE,GAAeA,EACzBA,EAAM/E,OACC2I,EAAKyC,UAAUrG,EAAM/E,OAAQsD,SAEnCqF,EAAKnO,QAAQ8S,aAAavI,EAAM9E,YAAc8E,IAAUA,EAAM9N,MAC/D0R,EAAK9F,GAAGiJ,WAAU,WACdnD,EAAKnO,QAAQ+S,aAAa7L,EAAU4B,GACpCqF,EAAKnO,QAAQJ,mBAM7BoT,uBAAclK,EAAK5B,OACTlJ,EAAO8K,EAAI9K,YACbzB,KAAK0W,MAAMnK,EAAIrM,MACRF,KAAK0W,MAAMnK,EAAIrM,MAAMuB,EAAMkJ,GAClC3K,KAAK0W,MAAMnK,EAAIoI,YACR3U,KAAK0W,MAAMnK,EAAIoI,YAAYlT,EAAMkJ,GACrC3K,KAAK0W,MAAM/K,KAAKY,EAAIoI,WAAYlT,EAAMkJ,IAEjDxI,oBAAWpB,OAAM4J,yDAAW,GACpBzK,EAAO+S,OAAOlS,EAAKb,MACjByW,EAAQ3W,KAAK0W,MAAME,SAAS1W,UAC9ByW,IAAOzW,EAAO+S,OAAO0D,IAClB3W,KAAK8L,GAAG+K,eAAe3W,EAAMa,EAAM4J,MC9OvC,SAAS8H,OAAOqE,GAC3BhX,OAAOE,KAAM,CACTyD,QAASqT,EACT9H,GAAI8H,EAAO9H,GACXlD,GAAIgL,EAAOhL,GACXyD,SAAUuH,EAAOvH,SACjBmH,MAAO,IAAII,EAAO9H,GAAG+H,WAAWD,EAAOhL,MAG3CnD,UAAU3I,KAAM,CACZyK,0BACWqM,EAAOrM,SAElByD,2BACW4I,EAAO5I,iBAIjBwE,iBACAmB,aCnBM,SAASmD,UAAUC,GAC9BnX,OAAOmX,EAAQtX,UAAW,CACtBuX,0BAAiBnW,EAAMwJ,kBACC,IAAhBxJ,EAAKsS,YACHA,EAAStS,EAAKsS,QAAUrT,KAAKyK,QAAQ0M,gBACvClX,GAAGI,MAAMgT,UACblU,OAAO6E,KAAKuG,GAAItJ,SAAQ,SAAAD,GAChBf,GAAGwI,SAAS8B,EAAGvJ,MACfuJ,EAAGvJ,GAAKuC,EAAK8P,OAAOtS,EAAMwJ,EAAGvJ,GAAIqS,OAElC9I,IAEX6M,mBAAU7K,EAAKhC,cACPtF,EAAQ,GAAIlE,EAAOwL,EAAIxL,KAAOsW,EAAmCtW,EAAnCsW,WAAYxY,EAAuBkC,EAAvBlC,MAAOyC,EAAgBP,EAAhBO,KAAM+R,EAAUtS,EAAVsS,OACvDxI,EAAO9J,EAAKwJ,EAAK,OAAS,eAAiB,MAC3CtK,GAAGS,UAAUmK,GAAO,KAChByM,EAAUD,GAAcxY,GAASyC,EACjCgW,IACK/M,IAAI+M,mBAAoBA,IAC7BzM,EAAK5J,SAAQ,SAAAsW,MACJA,OACCC,EAAW7N,iBAAU2N,cAAWC,IAChC9P,EAAK,0CAAItH,2BAAAA,qBACX8D,EAAK6H,IAAGhJ,eAAM0U,UAAarX,OAC3B8D,EAAK6H,IAAGhJ,eAAM,aAAc0U,UAAarX,KAE7CsH,EAAGF,QAAS,GAEG,IAAX8L,EACApO,EAAMsS,GAAa9P,GAEnB4L,EAAStS,EAAKsS,QAAUpP,EAAKwG,QAAQ0M,YACrClS,EAAMsS,GAAatX,GAAGI,MAAMgT,GAAU5L,EAAKxD,EAAKoP,OAAOtS,EAAM0G,EAAI4L,gBAMjF9G,EAAIkL,SAASlN,EAAK,KAAO,YAActF,EAChCA,GAEXsP,uBAAcmD,EAAMrE,SACOrT,KAAK8L,GAAGlI,SAASC,UAAjCjC,IAAAA,OAAQb,IAAAA,WACR,CACHiB,GAAIhC,KAAK6B,IACTd,KAAAA,EACA2W,KAAMA,EAAKxO,WACXtH,OAAAA,EACAyR,OAAAA,IAGRA,gBAAOqE,EAAMC,EAAKtE,MACVsE,EAAItQ,SAAU,IACVrH,KAAK4X,SACL,OAAOD,EACXA,EAAMA,EAAIrQ,aAGR6E,EAAInM,KAEJyH,EAAK,sCAAa2I,2BAAAA,yBACpBA,EAAKyH,QAAQ1L,EAAEoI,cAAcmD,EAAMrE,IAC5BsE,EAAI5X,MAAMC,KAAMoQ,WAE3B3I,EAAGJ,UAAW,EACdI,EAAGH,SAAWqQ,EACPlQ,KCnEJ,SAASqQ,QAAQb,GAC5BnX,OAAOmX,EAAQtX,UAAW,CACtBmY,8BACUC,EAAO/X,KAAKyK,QAAQsN,QACrBA,OACDC,EAAQ,GACRC,EAAQC,SAASlY,KAAKoI,OACtBnI,GAAGd,OAAO4Y,KACNA,EAAKC,QAAOA,EAAQG,SAASJ,EAAKC,MAAO,KAAOA,GAChDD,EAAKE,QAAOA,EAAQE,SAASJ,EAAKE,MAAO,KAAOA,IAExDnY,OAAOE,KAAM,CACTgY,MAAAA,EACAC,MAAAA,EACAG,QAASpY,KAAKoI,MAAM3I,QAAUuY,SAG7B5F,IAAI+C,IAAI,YAAY,kBAAM5R,EAAKuI,GAAGhJ,MAAM,WAAYS,EAAK1B,aACzDwW,aAETA,oCAYSvM,GAAGqJ,IAAI,gBAXG,SAATmD,IACErU,EAAKmU,SACLnU,EAAK6H,GAAGyM,KAAK,eAAgBD,GAC7BrU,EAAKmO,IAAItP,MAAM,cAEfmB,EAAK+T,OAAS/T,EAAKgU,MACnBhU,EAAKmU,QAAUnU,EAAKmE,MAAM3I,QAAUwE,EAAK+T,MACzC/T,EAAKuU,WACLvU,EAAKZ,iBASzB,SAAS6U,SAAS9P,UACPA,EAAM3I,OAAS,GAAK,GAAKwK,KAAKwO,KAAKrQ,EAAM3I,OAAS,GCxC9C,SAASmU,YAAUqD,GAC9BnX,OAAOmX,EAAQtX,UAAW,CACtB+Y,8BACSvG,UAAY3I,aAAaxJ,KAAKmS,eAC9BA,SAAW,MAEpBwG,sBAAalR,mBACJiR,qBACAvG,SAAW1I,YAAW,WACvBhC,IACAlE,EAAK4O,SAAW,OACjB,KAEP9P,yBACIoE,QAAQC,KAAK,YAAa,iBACxB1G,KAAK4Y,SAEH5Y,KAAK8L,GAAG5J,OAAS,EACVlC,KAAKyM,QAAQpK,eAEfyJ,GAAG5J,OAAS,EACV,OCjBvB,SAASwM,KAAKnC,GACVpN,OAAO2J,iBAAiByD,EAAI3G,OAAQ,CAChCqD,OAAQlB,WAAWwE,GAAK,KAIjB,SAASsM,YAAY/B,EAAQ/V,OAClCgJ,EAAK7H,WAEXpC,OAAOE,KAAM,CACT+J,GAAAA,EACAyG,IAAKzG,EACL+O,QAAS/O,EAAK,KACdhJ,KAAAA,EACA6E,OAAQ7E,EAAKmI,YAAcnI,EAC3BO,KAAMP,EAAKO,KAEXyB,MAAO,GACPgW,OAAQ,GACR5K,KAAM,GACN6K,SAAU,GACVnG,OAAQ,KACR6B,YAAa,KACbjT,KAAM,GACNgW,SAAU,GACVvC,QAASnU,EAAKlC,MACdoR,QAAIlO,EACJwP,aAAcxQ,EAAKlC,MAAQwH,SAAStF,EAAKjC,YAASiD,EAClDlD,MAAOkC,EAAKlC,YAASkD,SAGpBkX,kBACA7J,YACLV,KAAK1O,WACAkZ,OAAOpC,GAAQ,GChCT,SAASqC,UAAUlC,GAC9BnX,OAAOmX,EAAQtX,UAAW,CACtByZ,+BACUrP,EAAK/J,KAAK4Y,cACX9M,GAAGiJ,WAAU,WACdhL,IAAOxG,EAAKqV,UAAYrV,EAAKF,cAGrCgW,mBAAUC,cACAvY,EAAOmF,QAAQoT,UAErBna,OAAO2J,iBAAiB/H,EAAM,CAC1BmI,WAAYnB,WAAWuR,GAAO,KAGlCC,SAASxY,GAELA,EAAKlC,OAASiC,YAAYd,KAAKyK,QAAQ3I,UAAY,GAAIf,EAAKlC,SAC5DkC,EAAKjC,MAAQkB,KAAKyK,QAAQ3I,SAASf,EAAKlC,QAE5CkC,EAAK0J,QAAU+O,WAAWzY,EAAK0J,cAE1BgP,WAAW1Y,EAAM,SAErB,KAAM,QAAS,YAAYE,SAAQ,SAAAD,GAChCiD,EAAKiT,iBAAiBnW,EAAMA,EAAKC,IAAM,OAGpCD,GAEXwV,sBAAaxV,UACFf,KAAK0Z,WAAWlW,QAAQzC,IAAS,GAE5CyX,uBACI/R,QAAQC,KAAK,UAAW,mBACnBiT,WAAY,EACb3Z,KAAKoY,cACAhG,IAAItP,MAAM,mBAEd8W,UAAU5Z,KAAKoI,OAChBpI,KAAK2Z,WAAa3Z,KAAKoY,eAChBpY,KAAKwY,WAEZxY,KAAKoY,cACAhG,IAAItP,MAAM,iBAEdgJ,GAAGrJ,mBACHgK,QAAQuH,uBACR6F,YAETrD,sBAAa7L,EAAUkI,WACd8G,WAAY,OACZvH,IAAItP,MAAM,mBACV8W,UAAUjP,EAAUkI,GACrB7S,KAAK2Z,iBACE3Z,KAAKwY,gBAEX/L,QAAQC,WAAWmG,IAE5B+G,mBAAUxR,EAAOyK,cAWP2D,EAAe,SAAC7L,EAAUkI,GACxB5S,GAAGS,UAAUiK,IACb0F,EAAKuJ,UAAUjP,EAAUkI,IAIjCzK,EAAMgM,KAAI,SAACkF,EAAOrL,QACV4E,IAAU5S,GAAGyJ,OAAO4P,MACnBjJ,EAAK+H,SAAYvF,KAAU5E,GAASoC,EAAK2H,aAEzC/X,GAAGd,OAAOma,KAAWpT,QAAQoT,GAAOpZ,KACrC,OAAOyG,IAAI,mBAAoB2S,MAE/BA,EAAMrQ,QAAUqQ,EAAMrQ,OAAOkF,OAAS/F,GAASiI,EAAKzD,KAAK0M,EAAMrQ,OAAOc,WACtEyM,EAAa8C,EAAMrQ,OAAOlI,KAAK4J,SAAU2O,EAAMrQ,QACxCqQ,EAAMrQ,WAUbsD,EAPAxL,EAAOmF,QAAQoT,MAEfvY,EAAKlC,OAASwR,EAAKnD,UAAUnM,EAAKlC,cAClCwR,EAAKqJ,WAAW1D,KAAKsD,GACd3S,cAAO5F,EAAKlC,gBAAeya,MAIlCA,EAAMrQ,WACNsD,EAAM+M,EAAMrQ,QACJ6Q,aACCvN,EAAIwN,MAAM1J,GAAO,IACd9D,EAAIxL,KAAKqF,cAGbmG,EAAI2M,OAAO7I,aAGV9D,EAAIwN,MAAM1J,IAASA,EAAKzD,KAAKL,EAAIxC,IAAK,IACnCwC,EAAIxL,KAAKqF,cAGbgC,EAAM6F,GAASqL,EAAQA,EAAMrT,OAASqT,EAAMrT,SAAWiC,SAASoR,GAChE/M,EAAM,QAIbA,EAGMA,EAAIoI,aAAepI,EAAIxL,KAAKb,OACnCqM,EAAI0M,aACJ5I,EAAK2J,WAAWzN,KAJhBA,EAAM,IAAIsM,YAAYxI,EAAMA,EAAKgJ,UAAUC,IAC3CjJ,EAAK2J,WAAWzN,IAKpB8D,EAAK4J,YAAY1N,EAAIxL,QACpB,GAAO,GAAME,SAAQ,SAAA3B,UAAK+Q,EAAK+G,UAAU7K,EAAKjN,MAC/CiN,EAAIsG,OAASA,GAAU,KACvBtG,EAAI4B,KAAO/F,EACXiI,EAAK6J,OAAO3N,GAEZiK,EAAajK,EAAIxL,KAAK4J,SAAU4B,IAE3BsG,EAAQ,KACHsH,EAtEG,SAAXC,EAAYC,OACVC,EAAMlS,EAAMiS,EAAI,OACfC,IAAQA,EAAIrR,cACNoR,EAAI,EAAID,EAASC,EAAI,IAAM,MAElCpM,EAAQoC,EAAKnC,SAAS1K,QAAQ8W,EAAIrR,OAAOc,WACtCkE,GAAS,EAAIA,EAAQmM,EAASC,EAAI,GAgEnBD,CAASnM,GACvBkM,GAAa,EACb9J,EAAKnC,SAASE,OAAO+L,EAAY,EAAG,EAAG5N,EAAIxC,IAE3CsG,EAAKnC,SAAS8H,KAAKzJ,EAAIxC,QAIzBwQ,EAAIhO,EAAIxL,YACTwL,EAAIiO,UACLjO,EAAIiO,SAAU,EACVva,GAAGwI,SAAS8R,EAAErB,SACd7I,EAAK+B,IAAIC,MAAM,YAAY,WACvBhC,EAAKoK,cAAclO,EAAKgO,EAAEzb,WAKlCyN,EAAI2I,OACJ/V,OAAOub,eAAeH,EAAG,QAASlK,EAAKsK,YAAYpO,IACvD8D,EAAKgG,OAAO9J,EAAK,UACb8D,EAAKmB,eAAejF,KAAM8D,EAAKsJ,WAAY,GACxCpN,OAGfiF,wBAAejF,UACJA,EAAI2I,OAAS3I,EAAIxL,KAAK6J,SAAW5K,KAAK4a,QAAQrO,IAEzDqO,iBAAQrO,cACEsO,EAAWC,QAAQvO,GAAM/B,EAAW,GAAI3I,EAAM7B,KAAK6B,QACpDgZ,EAASpb,OAAQ,OAAO,qBAEpB4a,OACCzP,EAAUiQ,EAASR,GAAIU,EAAWnQ,EAAQkM,QAAW,SAAA3P,UAAOA,IAAQyD,EAAQ9L,OAC5E6B,mCACCiK,OACHmG,MAAO5H,QAAO,kBAAM4R,EAASxO,EAAIxL,KAAKjC,MAAO+C,MAC7CmZ,KAAMC,SAAS1O,EAAK3B,EAAQ7J,WAE3BJ,EAAKoQ,OAASpQ,EAAKqa,OAAWra,EAAKoQ,QAAUpQ,EAAKqa,KAAO,iBAC9DxQ,EAASwL,KAAKrV,IART0Z,EAAI,EAAGA,EAAIQ,EAASpb,OAAQ4a,MAA5BA,OAUJ7P,EAAS/K,OAAQ,OAAO,MAEzBkW,GAAO,SACXnL,EAAS0Q,UAAUja,SAAQ,gBAAE8P,IAAAA,MAAOhQ,IAAAA,KAAMsN,IAAAA,QAASP,IAAAA,OAAQE,IAAAA,MAAOgN,IAAAA,QAC1DjK,EAAO,CACP4E,GAAO,MACDwF,EAAU,CACZjb,KAAM,qBACE,EACRkG,QAAQ,EACRuE,SAAU5J,GAEdwL,EAAIyM,SAAShD,KAAKmF,GAClBhK,EAAKiB,IAAIC,MAAM,cAAc,WAErBhE,EACAxM,EAAIwM,QAAQ8M,EAAS9M,EAASL,GACvBF,GAAUE,EACjBnM,EAAIiM,OAAOqN,EAASrN,GAAUvB,EAAIxC,GAAIiE,GAEtCzB,EAAI4B,KAAKC,OAAO7B,EAAI4B,KAAK3K,QAAQ+I,EAAI3G,QAAU,EAAG,EAAGuV,UAG1D,CACH5O,EAAIyM,SAAS5K,OAAO7B,EAAIyM,SAASxV,QAAQwX,GAAO,OAC1CI,EAAUpS,MAAMgS,GACtBI,GAAWA,EAAQ7N,cAGtBzB,GAAGhJ,MAAM,UAAWyJ,EAAI3G,OAAQ5F,KAAK6B,UACrCwU,OAAO9J,EAAK,WACVoJ,GAEXjS,WAAY2F,UAAS,SAAUjB,UACpBpI,KAAKqb,YAAYjT,KACzB,GACHiT,qBAAYjT,cACR3B,QAAQC,KAAK,YAAa,aACrB0B,IAAOA,EAAQpI,KAAKoI,WAEnBwE,oBAAW5M,KAAK4M,WAEjB8L,qBACAjM,QAAQsH,wBACRuH,SAASlT,QAETgK,IAAIC,MAAM,YAAY,WACvBlT,OAAO6E,KAAK4I,GAAMzG,QAAO,SAAA4D,eAAwBhI,IAAlB6P,EAAKhF,KAAK7C,MACpC9I,SAAQ,SAAA8I,UAAM6H,EAAK0E,MAAM1J,EAAK7C,IAAK,MACxC6H,EAAKnF,QAAQ6C,wBAGZkJ,gBACAnV,eAEA+O,IAAImG,KAAK,YAAavY,KAAKub,iBAC3BnJ,IAAIC,MAAM,YAAarS,KAAKub,aAGrClY,wBACSyI,GAAGtJ,cAMpB,SAASgX,WAAWhP,UACT5J,MAAMC,QAAQ2J,GAAYA,EAAW,GAGhD,SAAS+O,SAASxY,OACRqI,EAAMkB,kBAEZnL,OAAO6E,KAAKoF,GAAKnI,SAAQ,SAAAD,GAChBF,YAAYC,EAAMC,IAAIrC,KAAKoC,EAAMC,EAAGoI,EAAIpI,OAE1CD,EAGX,SAAS+Z,QAAQvO,OACP3B,EAAU2B,EAAIxL,KAAK6J,SAAW,UAChC3K,GAAGd,OAAOyL,GAAiB,CAACA,GACpBA,EAGhB,SAASqQ,SAAS1O,EAAKxL,OACd,IAAIsZ,EAAI,EAAGA,EAAI9N,EAAIyM,SAASvZ,OAAQ4a,IAAK,KACpCW,EAAOzO,EAAIyM,SAASqB,MACtBW,EAAKrQ,WAAa5J,EAClB,OAAOia,GC1QJ,SAASQ,SAASvE,GAC7BnX,OAAOmX,EAAQtX,UAAW,CACtBwN,kBAASZ,UACAzL,YAAYyL,EAAK,gBAClBA,EAAIkP,WAAalP,EAAIyI,OAAO0G,QAAQ1b,KAAKmW,YAAY5J,GAAMA,IAExDA,EAAIkP,YAEfvY,kBAASqJ,EAAKzN,EAAO6c,EAAWC,GAC5BrP,EAAIkP,WAAa3c,OACZ2Q,cAAe,OACf2J,gBACA3M,QAAQC,WAAWH,QACnBsP,YAAYtP,EAAKoP,QACjBG,iBACAC,YAAYxP,EAAKzN,QACjBgN,GAAGhJ,MAAM,SAAUyJ,EAAI1N,MAAOC,EAAOyN,EAAI3G,OAAQ5F,KAAK6B,IAAK+Z,QAC3DvF,OAAO9J,EAAK,UAErB6I,iBAAQ7I,EAAKzN,OACLqI,EACAoF,EAAI2I,QAAUlV,KAAKgc,QAAQzP,EAAKpF,EAAMoF,EAAIyI,OAAO0G,QAAQ5c,EAAOyN,KAASvM,KAAKic,SAAS1P,EAAKpF,UACvFjE,SAASqJ,EAAKpF,EAAKrI,IAGhC+c,qBAAYtP,EAAKzN,GACbH,KAAKqB,KAAK8B,SAAUyK,EAAI1N,MAAOC,IAEnCqX,qBAAY5J,UACDvM,KAAK8B,SAASyK,EAAI1N,QAE7Bgb,+BACI1a,OAAO6E,KAAKhE,KAAKiN,MAAMhM,SAAQ,SAAAD,iBAAYuC,EAAK0J,KAAKjM,MACrD7B,OAAO2J,iBAAiB9I,KAAKiN,KAAM9N,OAAO6E,KAAKhE,KAAK8B,UAAU+C,QAAO,SAACN,EAAS1F,OACrE0N,EAAMhJ,EAAKiJ,OAAO3N,GAClBiY,EAASvT,EAAKoX,YAAYpO,UAChCuK,EAAO7O,cAAe,EACtB1D,EAAQ1F,GAASiY,EACVvS,IACR,UACEuX,aAETnB,qBAAYpO,oBACD,CACHxE,YAAY,EACZgB,IAAK,kBACM9E,EAAKkJ,SAASZ,IAEzBvN,IAAK,SAACF,GACEmF,EAAKgY,SAAS1P,EAAKzN,IACnBmF,EAAKf,SAASqJ,EAAKzN,EAAOyN,EAAIyI,OAAOkH,YAAYpd,EAAOyN,IAAM,MAK9E0N,qBAAYlZ,GACHA,EAAKlC,OAAUiC,YAAYd,KAAKqN,WAAYtM,EAAKlC,SACtDkC,EAAKjC,MAAQkB,KAAKqN,WAAWtM,EAAKlC,cAC3BmB,KAAKqN,WAAWtM,EAAKlC,SAEhCqX,oBAAW3J,EAAKsE,QACPA,QAAQtE,EAAI1N,OAASgS,GAE9BiL,0BACShQ,GAAGpJ,+BAAiB1C,KAAKiN,QAElCgP,kBAAS1P,EAAKzN,UACH8D,KAAKC,UAAU0J,EAAIxL,KAAKjC,SAAW8D,KAAKC,UAAU/D,IAE7Dkd,iBAAQzP,EAAKzN,UACDmB,GAAGd,OAAOL,IAAU8B,MAAMC,QAAQ/B,KAAWA,IAAUyN,EAAIxL,KAAKjC,OAE5E2b,uBAAclO,EAAKpF,cACTM,EAAK8E,EAAIxL,KAAKmY,UAChBjZ,GAAGwI,SAAShB,GAAK,KACXmJ,EAAQzH,QAAO,kBAAM1B,EAAGN,EAAKoF,EAAI3G,OAAQyK,EAAKxO,gBACtCE,IAAV6O,EAAqB,OACzBrE,EAAIxL,KAAKgK,QAAmB,IAAV6F,IAG1BmL,qBAAYxP,EAAKpF,QACRgV,YAAY5P,EAAKpF,QACjBiL,IAAItP,MAAM,UAAYyJ,EAAI1N,MAAOsI,IAE1CgV,qBAAY5P,EAAKpF,GACTnH,KAAKwR,eAAejF,UACfE,QAAQ6C,qBACRkJ,gBACAnV,gBAEJoX,cAAclO,EAAKpF,IAE5BiV,oBAAW7P,cACDzB,EAAOyB,EAAIxL,KAAK+J,KACtB7K,GAAGS,UAAUoK,IAASA,EAAK7J,SAAQ,SAAApC,OACzB4I,EAAK,kBAAM0J,EAAKgL,YAAY5P,EAAKA,EAAIxL,KAAKjC,QAEhDqS,EAAKiB,IAAI+C,IAAI,UAAYtW,EAAO4I,GAChC8E,EAAIwM,OAAO/C,MAAK,kBAAM7E,EAAKiB,IAAImG,KAAK,UAAY1Z,EAAO4I,UAG/D4E,yBACWlN,OAAO6E,KAAKhE,KAAK8B,aCvGrB,SAASua,UAAUjU,GACzBxH,MAAMC,QAAQuH,KAAUA,EAAMkU,WACnCnd,OAAO2J,iBAAiBV,EAAO,CAC3BkU,UAAWvU,WAAWuU,WACtBC,SAAUxU,WAAWwU,UACrBrZ,SAAU6E,WAAW7E,YAI7B,SAASsZ,KAAK3d,EAAOyC,EAAMsE,MAClB5F,KAAKP,gBACNkL,EAAW,GACN0P,EAAI,EAAGA,EAAIra,KAAKP,OAAQ4a,OACxBpa,GAAGd,OAAOa,KAAKqa,SAChBtZ,EAAOmF,QAAQlG,KAAKqa,OACpBtZ,EAAKO,KAAUzC,EAAO,OAAO+G,EAAS7E,EAAOf,KAAKqa,GAClDpa,GAAGS,UAAUK,EAAK4J,YAAWA,EAAWA,EAAS8R,OAAO1b,EAAK4J,WACjE1K,GAAGS,UAAUK,EAAK6J,UAAY7J,EAAK6J,QAAQ3J,SAAQ,SAAAsZ,GAC/C5P,EAAWA,EAAS8R,OAAOlC,EAAExZ,gBAG9Byb,KAAK3c,KAAK8K,EAAU9L,EAAOyC,EAAMsE,IAG5C,SAAS0W,UAAUzd,UACR2d,KAAK3c,KAAKG,KAAMnB,EAAO,SAGlC,SAAS0d,SAAS1d,UACP2d,KAAK3c,KAAKG,KAAMnB,EAAO,QAGlC,SAASqE,SAASpB,cACd3C,OAAO6E,KAAKlC,GAAUb,SAAQ,SAAApC,OACpBkC,EAAOyb,KAAK3c,KAAK0D,EAAM1E,EAAO,SAAS,GACzCkC,IAAMA,EAAKjC,MAAQgD,EAASjD,OPZxC2T,SAASC,QACTmB,UAAUnB,QIgBV3S,OAAO+Y,YAAYlZ,UAAW,CAC1ByP,mBAAUuG,QACD7Q,IAAM5C,WACXyT,GAAQ3V,KAAK6S,QAAU7S,KAAK6S,OAAOzD,UAAUyD,SAEjDoG,2BACStE,WAAa3U,KAAKe,KAAKb,UACvBA,KAAO+S,OAAOjT,KAAKe,KAAKb,OAEjCwc,mBAAU1H,QACDA,OAASA,EACdA,EAAO2H,KAAK3c,OAEhBwV,yBACS/T,KAAO4C,WAAW,CAACrE,KAAKe,KAAMf,KAAKyX,YAE5CsC,eAAMjD,UACK9W,KAAK8L,KAAOgL,EAAOhL,IAE9B8Q,wBACS7Z,MAAM9B,SAAQ,SAAA4b,UAAMA,YACpB9Z,MAAQ,IAEjB+Z,uBACS/D,OAAO9X,SAAQ,SAAA4b,UAAMA,YACrB9D,OAAS,IAElBjO,qBACSgS,cACArZ,QAAQ2Y,WAAWpc,OAE5B+c,wBACStZ,QAAQuZ,SAAShd,8BAIjB4c,eACAE,cACAG,SACLnd,OAAOE,KAAM,CACT8Z,SAAS,EACTrY,KAAM,GACNgW,SAAU,GACVxH,QARU,EASVxM,aATU,EAUVgJ,aAVU,EAWVX,QAXU,EAYV4K,WAZU,EAaV7D,OAAQ,KACR6B,YAAa,QAGrBuI,uBACSjE,SAAS/X,SAAQ,SAAA+Z,UAAQA,EAAK/R,OAAOsE,aACrCyL,SAAW,IAEpBzL,kBACQU,EAAQjO,KAAKmO,KAAK3K,QAAQxD,KAAK4F,SACpB,IAAXqI,SACCE,KAAKC,OAAOH,EAAO,QACnBgP,cACAxZ,QAAQ6S,MAAMtW,MACnBF,OAAOE,KAAM,CACTmO,KAAM,OAGd+K,gBAAOpC,EAAQ6F,GACX7c,OAAOE,KAAM,CACT8Z,SAAS,EACTrW,QAASqT,EACTrK,QAASqK,EAAOrK,QAChBX,GAAIgL,EAAOhL,GACX8I,SAAUkC,EAAOoG,QAAQld,KAAK2U,YAC9B+B,MAAOI,EAAOrK,QAAQiK,MACtB8D,SAAS,KAEZmC,GAAQ3c,KAAK4c,eACTG,eACAjS,UI1Hb,IAAMqS,WAAa,CACfR,cAAKpQ,KAEL2P,qBAAYpd,EAAOyN,UACRzN,GAEX4c,iBAAQC,EAAWpP,UACRoP,GAEX1G,iBAAQ1I,KAERlK,gBAAOsI,EAAU4B,UACNA,EAAIE,QAAQgK,cAAclK,EAAK5B,IAE1CoL,mBAAUxJ,MCPC,SAAS6Q,WAAWnG,GAC/BnX,OAAOmX,EAAQtX,UAAW,CACtB6M,gBAAOzC,UACI/J,KAAKkN,UAAUnD,IAAO/J,KAAKyO,WAAW1E,IAAO/J,KAAK4M,KAAK7C,IAElEmQ,gBAAO3N,OACExC,EAAyBwC,EAAzBxC,GAAIlL,EAAqB0N,EAArB1N,MAAOyC,EAAciL,EAAdjL,KAAMP,EAAQwL,EAARxL,UACjB6L,KAAK7C,GAAMwC,EACZjL,GAAM3C,KAAKqB,KAAKyO,WAAYnN,EAAMiL,GACjCA,EAAI2I,aACJhI,UAAUrO,GAAS0N,EACxB5N,KAAKqB,KAAK8B,SAAUjD,EAAO0N,EAAIyI,OAAOkH,YAAYnb,EAAKjC,MAAOyN,IAC9D5N,KAAKqB,KAAKwK,SAAU3L,EAAOkC,EAAKyJ,UAAY,MAEhD6S,mBAAU9Q,OACA+Q,EAAOtd,KAAKgP,GAAGuO,eACdD,EAAK/Q,EAAIoI,aAAe2I,EAAKrK,OAAO1G,EAAIrM,QAAUod,EAAK/Q,EAAIqI,WAAauI,YAEnFnD,oBAAWzN,GACPA,EAAImQ,UAAU1c,KAAKqd,UAAU9Q,KAEjC2Q,iBAAQvG,OACEvC,EAAMpU,KAAKgP,GAAG+H,WAAWH,SACzB1W,EAAOkU,EAAIuC,IAAUvC,EAAInB,OAAO0D,KAAWA,SAC1C1D,OAAO/S,IAElB8c,kBAASzQ,cACCT,EAAK9L,KAAK8L,GACV0R,EAAO,CAAC,QAAS,QAAS,KAAM,WAAY,OAAQ,SAAU,UAAW,UAC/Ere,OAAO6E,KAAKuI,EAAIxL,MAAMoF,QAAO,SAAAnF,UAA0B,IAArBwc,EAAKha,QAAQxC,MAAWC,SAAQ,SAAC6D,GAC/DyH,EAAIxJ,MAAMiT,KAAKlK,EAAG2R,QAAO,kBAAMlR,EAAIxL,KAAK+D,MAAM,SAAA7B,MAC1CM,EAAKqU,UAAW,EACJ,WAAR9S,EACAyH,EAAI6C,WAAU,OACb,CAAA,GAAY,SAARtK,cACLyH,EAAIzB,OAED,GAAY,aAARhG,EAAoB,KACvByH,EAAI2I,MAED,OADH3R,EAAKiH,SAAS+B,EAAI1N,OAASoE,GAAK,OAE7B,CAAC,QAAS,KAAM,YAAYO,QAAQsB,IAAQ,EACnDvB,EAAK2T,iBAAiB3K,EAAIxL,KAAMkC,GAAK,IAChC,CAAC,OAAQ,cAAcO,QAAQsB,IAAQ,EAC5CvB,EAAK6T,UAAU7K,EAAa,SAARzH,GACP,SAARA,GACLyH,EAAI0M,aACJ1V,EAAKyW,WAAWzN,IACD,aAARzH,GACPvB,EAAKiT,aAAavT,EAAGsJ,GAEzBhJ,EAAKkJ,QAAQC,WAAWH,GACxBhJ,EAAKqU,UAAW,IACjB,CAACzU,KAAc,aAAR2B,aAET4Y,YAAYnR,IAErB+J,eAAM/J,EAAKoR,QACFC,OAAOrR,GACPoR,SACIlR,QAAQuH,uBACR8H,cAGb8B,gBAAOrR,kBACCA,EAAIuN,aACD/P,EAAmBwC,EAAnBxC,GAAIlL,EAAe0N,EAAf1N,MAAOyC,EAAQiL,EAARjL,KACdiL,EAAI2I,OACJ/V,OAAOub,eAAenO,EAAIxL,KAAM,QAAS,CACrCjC,MAAOyN,EAAIxL,KAAKjC,MAChBkJ,UAAU,IAId/H,GAAGS,UAAU6L,EAAIxL,KAAK4J,WACtB4B,EAAIxL,KAAK4J,SAAS1J,SAAQ,SAAAkL,UAAKA,EAAElD,QAAUhF,EAAK2Z,OAAOzR,EAAElD,WAG7DhK,KAAKe,KAAK4M,KAAM7C,GAChB9K,KAAKe,KAAKwK,SAAU3L,GACpBI,KAAKe,KAAK8B,SAAUjD,GACpBI,KAAKe,KAAKiN,KAAMpO,GAChBI,KAAKe,KAAKkN,UAAWrO,GACrBI,KAAKe,KAAKyM,QAAQqH,WAAY/J,GAC9B9K,KAAKe,KAAKyO,WAAYnN,GACtBrC,KAAKe,KAAK6Q,QAAShS,GACnBI,KAAKsN,EAAK,kBAEJ0B,EAAQjO,KAAKkO,SAAS1K,QAAQuG,UAChCkE,GAAS,QACJC,SAASE,OAAOH,EAAO,GAGhC1B,gBACK8J,OAAO9J,EAAK,WACVA,MCjGJ,SAASsR,aAAa5G,GACjCnX,OAAOmX,EAAQtX,UAAW,CACtBsV,8BACU6I,EAAW,WACbva,EAAKwa,WAAY,EACjBxa,EAAKya,UAAU,YAEfhe,KAAKoY,QACL0F,SAEK1L,IAAIC,MAAM,WAAYyL,IAGnCE,mBAAU1c,cACAmG,EAAKzH,KAAKyK,QAAQnJ,GACxBrB,GAAGwI,SAAShB,IAAO0B,QAAO,kBAAM1B,EAAGxD,EAAKpC,aACnCiK,GAAGhJ,MAAMxB,EAAMtB,KAAK6B,QCjBtB,SAASoc,UAAUhH,GAC9BnX,OAAOmX,EAAQtX,UAAW,CACtBue,kCACUC,EAAKne,KAAKgP,GAAGoP,UACnBjf,OAAO6E,KAAKma,GAAIld,SAAQ,SAAAD,OACdS,EAAO0c,EAAGnd,GAChBS,EAAK4c,GAAKC,aAAa7c,GACvB8B,EAAKgb,SAAS9c,GACd8B,EAAK6a,UAAUpd,GAAKS,MAG5B8c,kBAASC,cACCC,EAAO,IACZD,EAASH,IAAM,CAAC,MAAMpd,SAAQ,SAAAK,OACrBpB,EAAgB,MAAToB,EAAe,IAAM2C,EAAKiZ,QAAQ5b,GAC3Cmd,EAAKjb,QAAQtD,IAAS,IAC1Bue,EAAKzI,KAAK9V,GACV+D,EAAKmO,IAAI+C,gBAASqJ,EAASE,iBAAQxe,cAAQse,EAAStJ,MAAQ,EAAI,IAAK,SAACjQ,EAAOmL,GACzEoO,EAASvZ,IAAUuZ,EAASvZ,SAATuZ,qBAAmBpO,WAG9CoO,EAASG,MAAQF,GAErBf,qBAAYnR,cACFT,EAAK9L,KAAK8L,GAChB3M,OAAO6E,KAAKuI,EAAIxL,KAAKsV,QAAU,IAAIpV,SAAQ,SAAAD,GACvCuL,EAAIxJ,MAAMiT,KAAKlK,EAAG2R,QAAO,kBAAMlR,EAAIxL,KAAKsV,OAAOrV,MAAI,SAACiC,GAChDoN,EAAKgG,OAAO9J,EAAK,2BAAWvL,EAAIiC,YAI5CoT,gBAAO9J,EAAKtH,EAAO6Q,QACV8I,WAAW,CACZ7d,KAAMwL,EAAIxL,KACVmU,MAAO3I,EAAI2I,MACXhV,KAAMqM,EAAIqI,SACVkB,OAAAA,GACD7Q,IAEPwU,oBAAW1Y,EAAMkE,QACR2Z,WAAW,CACZ7d,KAAAA,EACAmU,QAASnU,EAAKlC,MACdqB,KAAMF,KAAKkd,QAAQnc,EAAKb,OACzB+E,IAEP2Z,sBAAwC3Z,cAA5BlE,IAAAA,KAAMmU,IAAAA,MAAOhV,IAAAA,KAAM4V,IAAAA,UACtB5V,GAAiB,eAATA,OACPmW,EAASP,IAAmB/U,EAAKsV,QAAU,IACjDlX,OAAO6E,KAAKqS,GAAQpV,SAAQ,SAAAyd,OAClBG,EAAI1N,EAAKiN,UAAUM,MACpBG,KAAMA,EAAE3J,OAAUA,QACnB4J,KACCD,EAAER,GAEA,CAAA,KAAIQ,EAAEF,MAAMnb,QAAQtD,IAAS,UAChC4e,EAAQ5e,OAFR4e,EAAQ,IAMZ3N,EAAKiB,IAAItP,kBAAW4b,cAAQI,cAASD,EAAE3J,MAAQ,EAAI,GAAKjQ,EAAO,CAACoR,EAAOqI,GAAO3d,EAAMoQ,EAAKtP,cAMzG,SAASK,OAAO6c,UACLA,EAAI5Y,QAAO,SAAU6Y,EAAM/Q,EAAO8Q,UAC9BA,EAAIvb,QAAQwb,EAAM,KAAO/Q,KAIxC,SAASqQ,aAAaO,OACZtf,EAAIsf,EAAEI,kBACRre,MAAMC,QAAQtB,GAAW2C,OAAO3C,EAAE4G,QAAO,SAAA7F,SAAW,MAANA,QACzCL,GAAGyJ,OAAOnK,IAAW,CAACA,GChEpB,SAAS0X,QAAQjI,cAC5BlP,OAAOE,KAAM,CACTgP,GAAAA,EACAlD,GAAIkD,EAAGlD,GACP8L,UAAU,EACVmG,WAAW,EACXvT,SAAU,GACV1I,SAAU,GACV+O,QAAS,GACT5D,KAAM,GACNI,WAAY,GACZ+Q,UAAW,GACXzE,UAAW,KACXf,SAAU,EACVzG,SAAU,KACV1C,cAAc,EACd2I,SAAS,EACTmD,WAAY,WACRhY,EAAKya,UAAU,aAIvBrV,UAAU3I,KAAM,CACZyK,0BACWuE,EAAGvE,SAEd2H,sBACWpD,EAAGoD,YAIbkJ,SAAStM,EAAG5G,YAEZmH,SAAW,IAAIP,EAAGkQ,QAAQlf,WAC1ByM,QAAU,IAAIgG,OAAOzS,WACrB6B,IAAMqK,IAAIlM,MAGnBF,OAAOmX,QAAQtX,UAAW,CACtB2b,kBAASlT,GACLtI,OAAOE,KAAM,CACTkN,UAAW,GACXN,KAAM,GACN6B,WAAY,GACZP,SAAU,GACV9F,MAAAA,EACAsR,WAAY,KAEhB2C,UAAUjU,IAEduU,qBACSuB,mBACApG,eACAU,gBACAjJ,SAAS4P,cACTrT,GAAGnN,KAAKqB,KAAK8L,GAAI,WAAY9L,KAAK8B,aAI/CkV,UAAUC,SACVa,QAAQb,SACRrD,YAAUqD,SACVkC,UAAUlC,SACVuE,SAASvE,SACTmG,WAAWnG,SACX4G,aAAa5G,SACbgH,UAAUhH,SCjFV,IAAM9V,OAAO,sBAEE,CACXG,KAAMH,OACNie,YAAY,EACZ/c,gBAAO8J,EAAGI,UACCA,EAAI5B,WCDnB,SAAS0U,UAAU5d,UACXxB,GAAGyJ,OAAOjI,GACH,CAAC6d,SAAU,CAACC,UAAW9d,IAC3BA,EAGJ,SAAS+d,wBAEN5I,EAAW,YAERG,EAAWjL,GAChBA,GAAM9L,KAAKyf,MAAM3T,UAGrBhM,OAAOiX,EAAWpX,UAAW,CACzB8f,eAAM3T,QACGA,GAAKA,OACL4T,GAAK5T,EAAG+K,gBAEjBlL,cAAKgU,EAAUhf,EAAMgK,OACbiV,EAAO5f,KAAK0f,GAAGC,EAAUN,UAAU1e,GAAOgK,GAAY,WAC1DiV,EAAKC,QAAU7f,KAAK8L,GACb8T,GAEXhJ,SAAAA,IAGJ9W,OAAOiX,EAAY,CACfH,SAAAA,EACAD,eAAMA,EAAOrV,GACTsV,EAASD,GAASrV,GAEtBsR,aAAIkN,GACA3gB,OAAO6E,KAAK8b,GAAO7e,SAAQ,SAACD,OAClB4I,EAAOD,OAAO3I,GACd+e,EAAQ3f,SAASY,GAAG6I,oBACpBvJ,EAAIwf,EAAM9e,IACfA,EAAG4I,EAAMmW,GAAO9e,SAAQ,SAAAgC,GACrB8T,EAAWJ,MAAM3V,EAAGV,GACpByW,EAAWpX,UAAUsD,GAAK,SAAUtC,EAAMgK,UAC/B3K,KAAK2L,KAAKrL,EAAGK,EAAMgK,aAOvCoM,EChDJ,SAASiJ,cAAcC,OACpBC,0BAAsBC,sHAG5BhhB,OAAOC,OAAO8gB,EAAcvgB,UAAWsgB,GAChCC,EAGI,SAASC,QAAQnd,GAC5BlD,OAAOE,KAAM,CACTyD,QAAST,EACT8I,GAAI9I,EAAQ8I,GACZrB,QAAS,GACT+F,IAAK,SACL4P,iBAAkB,CACd5X,OAAQ,CAAC,OAAQ,MAAO,OAAQ,YAAa,oBAGhD4G,iBACAuN,OAGT7c,OAAOqgB,QAAQxgB,UAAW,CACtBwf,uBACS1S,QAAUzM,KAAKyD,QAAQgJ,SAEhC2C,0BACStK,IAAM5C,YAGfya,kBAEAzD,oBAEAhF,0BAEAjH,uBACWjN,KAAK8L,GAAGyE,MAAMvQ,KAAKwQ,MAE9B6P,sBAAajQ,EAAM5L,qBACRH,WAAW+L,EAAKgE,KAAI,SAAA9T,UAAKiD,EAAK+c,YAAYhgB,MAAKkE,EAAKxE,KAAKogB,mBAEpErc,uBAAc0G,QACLA,QAAUzK,KAAKqgB,aAAa,CAAC5V,GAAUzK,KAAKugB,0BAC5CrH,UAEToH,qBAAY7V,UACDA,GAEXgL,kBAASlJ,KAETwJ,mBAAUxJ,KAEVgU,mCACW,IAEXle,gBAAOsI,OC9CJ,IAAI6V,KAAyB,oBAAXC,QAA0BA,OAAO1hB,IAAM0hB,OAAO1hB,IAAMA,IAE7E,SAAS2hB,WAAWpf,EAAMyI,OAClBtI,SACqB,IAArBjC,UAAUC,OAEVsK,GADAtI,EAAOjC,UAAU,IACP8B,GAEVG,EAAOjC,UAAU,GAEd,CAACuK,GAAAA,EAAItI,KAAAA,GAGhB,SAASkf,kBACED,yBAAW,0CAAWlhB,aAGjC,SAASohB,OAAOnW,UACPA,GAAYA,EAAQwF,GAClBhQ,GAAGM,QAAQkK,EAAQwF,IACpBxF,EAAQwF,GACR4Q,SAASC,cAAcrW,EAAQwF,IAHDwQ,OAAOI,SAASE,KAMxD,SAASC,UAAU5Y,EAAOxG,OAChBqf,EAAM,IAAIT,KAAK,CACjB7f,sBAEW,CAACI,KAAMqH,EAAOxG,OAAQA,GAAU,KAE3CS,gBAAO8J,UACIA,EAAE,aAAc,CAACqE,IAAK,KAAM9O,MAAO1B,KAAKkhB,kBAGvDD,EAAIE,SACGF,EAII,SAASG,kBAAkBC,OAEhCpC,qBACDqC,SAAShgB,KAAOggB,UAEfC,EAAU,GACVhE,EAAU,GACViE,EAAa,GACbpD,EAAY,GACZ/S,EAAQU,eACV0V,EAAe,CAAChN,OAAQ,IACtB9T,EAAO,GACPoW,EAAayI,6BAEVrZ,QACCxF,EAAOggB,sBAAYnhB,WACrBmB,EAAKoJ,IAAMpJ,EAAKc,OAAM8f,EAAQ5gB,EAAKoJ,IAAMpJ,EAAKc,eAG7CigB,QACC/gB,EAAOggB,sBAAYnhB,WACrBmB,EAAKoJ,IAAMpJ,EAAKc,OAAM+f,EAAW7gB,EAAKoJ,IAAMpJ,EAAKc,eAGhDkgB,QACChhB,EAAO+f,yBAAW,0CAAWlhB,aAC/BmB,EAAKoJ,IAAMpJ,EAAKc,OAAM2c,EAAUzd,EAAKoJ,qCAAUpJ,EAAKc,UAAMid,KAAM/d,EAAKoJ,eAGpE6X,EAAejL,GACpBI,EAAWnE,IAAI+D,YAGV3B,QACCrU,EAAOggB,sBAAYnhB,cACpBmB,EAAKoJ,IAAOpJ,EAAKc,UAChBH,EAAO2R,OAAOtS,EAAKoJ,IACnBiL,EAASrU,EAAKc,KACpB8b,EAAQjc,oCAAY6b,YAAenI,GACnC3J,EAAM/J,GAAQ0J,eAAe1J,GAC7B0T,EAAO3J,OAASvL,OAAOuL,EAAO2J,EAAO3J,iBAGhCmD,EAAUzE,EAAIyE,OACflN,KACArB,GAAGyJ,OAAOK,GAAK,IACfzI,EAAO2R,OAAOlJ,GACV,CAAC,cAAe,cAAcvG,QAAQlC,IAAS,SACxCugB,IACJ,QAAkB9f,IAAdyM,SACAyQ,EAAW3d,QAGtBA,EAAO2R,OAAOlJ,EAAGzI,MACjBkN,EAAYzE,EAEXzI,GAASkN,IACdyQ,EAAW3d,GAAQkN,EACfA,EAAUsT,kBAAkB9M,EAAO1T,EAAMkN,EAAUsT,4BAGlDD,WACErB,KAAK1gB,OAAOsB,YAAYC,aAI1BuR,EAAInL,UACLxH,GAAGwI,SAAShB,EAAGsa,SAAUta,EAAGsa,QAAQrW,GAC/BzL,GAAGwI,SAAShB,IAAKA,EAAGiE,GACtB1L,cAGF0L,EAAOtD,EAAO4Z,EAAMnP,OACrBoO,EAAMD,UAAU5Y,EAAO4Z,GAAQ,IAC7Bze,EAAQ0d,EAAI1Q,MAAMvB,GAAG1M,kBAC3BiB,EAAM0e,QAAUpP,EAChB+N,OAAOrd,EAAMkH,SAASyX,YAAYjB,EAAIvT,KAC/BnK,EAAM1B,eAGRR,EAAWyK,EAAI1D,EAAOqC,GAC3B3K,OAAOE,KAAM,CACT8L,GAAAA,EACAoT,QAASc,cAAcqB,EAAOnC,SAC9B3B,QAAAA,EACAa,UAAAA,EACAhW,MAAOxH,MAAMC,QAAQuH,GAASA,EAAQ,GACtC3G,KAAM,CACFwd,WAAAA,EACAsC,QAAAA,EACAC,WAAAA,GAEJzK,WAAAA,EACA3E,IAAK,IAAIoO,YAER7D,YACAvZ,YAAYqH,GAAW,aAkDvB0X,EAAQ7f,GACbxC,OAAOwC,EAAY,CACf8f,QAASf,EAAOe,QAChBC,GAAIhB,EAAOgB,GACX1hB,KAAAA,EACA0K,MAAAA,EACAmD,UAAAA,EACArI,OAAAA,EACAub,UAAAA,EACAC,SAAAA,EACA3M,OAAAA,EACApC,IAAAA,EACAgP,eAAAA,EACA1Z,SAAAA,SACAC,UAAAA,UACA0Z,MAAAA,EACAla,UAAAA,mBA/DR7H,OAAOuB,EAAW1B,UAAW,CACzBgd,2BACU7Q,EAAK9L,KAAK8L,GACVK,EAAI,IAAImW,QAAOtiB,WAChByD,QAAU0I,EACfL,EAAG9J,GAAKmK,EAAEtK,IACViK,EAAGhJ,MAAM,QAASqJ,EAAEtK,KAEpBiK,EAAGqJ,IAAI,gBAAgB,WACnBlR,EAAKse,aAETzW,EAAGqJ,IAAI,gBAAgB,WACnBlR,EAAKgR,aAETnJ,EAAGqJ,IAAI,sBAAsB,WACzBhJ,EAAEzI,WAAW,OAEjBoI,EAAGqJ,IAAI,gBAAgB,WACnBhJ,EAAEwM,cAAa,kBAAM1U,EAAKmO,IAAItP,MAAM,YAAaqJ,EAAEtK,YAG3DuB,qBAAYqH,QACHA,wBAAW3I,SAAU,IAAO2f,QAC5B1d,cAAc0G,IAEvB1G,uBAAc0G,GACNA,EAAQgK,cACHhK,QAAQgK,OAAS/L,YAAY1I,KAAKyK,QAAQgK,OAAQhK,EAAQgK,cAE9DhR,QAAQ8L,SAAS8Q,aAAa,CAAC5V,GAAUzK,KAAKyK,cAC9ChH,QAAQ8L,SAASxL,cAAc/D,KAAKyK,UAE7C8X,wBACS9e,QAAQkZ,QAEjB9a,sBACW7B,KAAKyD,QAAQ5B,KAExBQ,yBACWrC,KAAKyD,QAAQpB,UAExB4S,wBACSxR,QAAQwR,aAiErBkN,EAAQzW,YAxCWrK,GACfvB,OAAOuB,EAAY,CACfqK,OAAAA,EACAqW,iBAAQhjB,EAAK0L,MACTgX,mCAAmBA,GAAkBhX,GAAW,KACf,IAA7B1L,EAAIyjB,sBACRzjB,EAAIyjB,sBAAuB,EAC3BhC,KAAOzhB,MAED0jB,EAAc,SAAUra,OAAO5D,yDAAM,UAChCkH,EAAOtD,EAAO5D,EAAKxE,OAG9BmiB,EAAQM,GAER1jB,EAAIY,UAAU8iB,YAAcA,EAC5B1jB,EAAIyP,UAAU,aAAcqT,OAEhClF,cAAKvU,OAAO4Z,yDAAO,GACXf,EAAMD,UAAU5Y,EAAO4Z,GAAOze,EAAQ0d,EAAI1Q,MAAMvB,GAAG1M,iBAChD,CACHogB,eAAMhV,UACEA,GAAOzN,GAAGM,QAAQmN,KAClBnK,EAAMkH,QAAQwF,GAAKvC,GACvBkT,OAAOrd,EAAMkH,SAASyX,YAAYjB,EAAIvT,KAC/BnK,EAAM1B,OAEjB8gB,kBACI1B,EAAIvT,IAAIC,YAAcsT,EAAIvT,IAAIC,WAAWC,YAAYqT,EAAIvT,MAE7DD,wBACSkV,SACL1B,EAAIpT,YAER7L,GAAIuB,EAAM1B,UAO1B+gB,CAAUlX,GAEVqL,EAAWnE,IAAI,CAAC0O,SAAU,eAEtBD,EAAOU,SAASrW,EAAOkH,IAAIyO,GAExB3V"}